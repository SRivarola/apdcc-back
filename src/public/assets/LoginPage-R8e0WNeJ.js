import{e as j,z as o,h as y,r as d,U as N,g as v,k,j as e,l as m,b as E,A as S,t as C}from"./index-ud7WvSZc.js";import{U as L,E as z,a as U}from"./user-nPtwNioP.js";/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I=j("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),A=o.object({mail:o.string().email({message:"Por favor, ingresa una dirección de correo electrónico válida"}),password:o.string().min(8,{message:"La contraseña debe contener al menos 8 caracteres"})}),M="https://apdcc-back-production.up.railway.app/api/auth/login";function R(){var l,c;const r=y(),[t,u]=d.useState(!1),{setAuthChange:p}=d.useContext(N),{setAdminRole:x}=v(),g=()=>u(!t),{register:n,handleSubmit:f,formState:{errors:i}}=k({defaultValues:{mail:"",password:""},resolver:C(A)}),h=async b=>{S.promise(async()=>{try{const s=await fetch(M,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(b)});if(s.ok){const a=await s.json();return localStorage.setItem("apdcc_token",a.token),x(a.user.role),p(w=>!w),a.user.role==="JUEZ"?r("/dashboard/judges"):r("/dashboard"),"¡Inicio de sesión exitoso! 😄 ¡Bienvenid@!"}else throw new Error("Oops, algo salió mal en el inicio de sesión. 😕")}catch(s){throw console.log(s),s}},{loading:"Loading...",success:s=>s,error:s=>s.message})};return e.jsx("section",{className:"absolute w-screen h-screen top-0 left-0 flex items-center justify-center px-3 pb-3 bg-black",children:e.jsxs("div",{className:"max-w-xs p-10 m-auto rounded-xl xl:max-w-lg bg-white/10",children:[e.jsxs("h1",{className:"flex items-center justify-center gap-1 pb-2 text-2xl font-medium text-center md:text-4xl md:gap-2",children:[e.jsx(L,{className:"w-6 h-6 md:w-9 md:h-9"}),"Login"]}),e.jsxs("form",{className:"flex flex-col items-center justify-center gap-3 ",onSubmit:f(h),children:[e.jsx(m,{type:"email",id:"mail",isRequired:!0,size:"lg",label:"Email",variant:"underlined",placeholder:"ejemplo@ejemplo.com",className:"max-w-xs",color:"default",errorMessage:(l=i.mail)==null?void 0:l.message,endContent:e.jsx(I,{className:"text-default-400 ",size:22}),...n("mail")}),e.jsx(m,{label:"Password",id:"password",isRequired:!0,size:"lg",variant:"underlined",placeholder:"Enter your password",color:"default",errorMessage:(c=i.password)==null?void 0:c.message,endContent:e.jsx("button",{className:"focus:outline-none",type:"button",onClick:g,children:t?e.jsx(z,{size:22,className:"text-2xl pointer-events-none text-default-400"}):e.jsx(U,{size:22,className:"text-2xl pointer-events-none text-default-400"})}),type:t?"text":"password",className:"max-w-xs ",...n("password")}),e.jsx(E,{className:"w-full mt-2 uppercase font-semibold",type:"submit",variant:"solid",radius:"sm",color:"default",children:"Login"})]})]})})}export{R as default};
