import{j as e,l as m,s as D,b as S,aW as _,h as P,r as c,w as z}from"./index-zsI5OImO.js";import{N as M}from"./NavbarPdf-RQYvkoLE.js";import{I as N}from"./InputDate-tw54YRLl.js";import{S as E,D as Y,P as F,V as t,T as s,a as T,l as k}from"./react-pdf.browser-yyG9FPTo.js";import"./chunk-TC4QW7OA-smmxgv9d.js";import"./import-TFnQkHmR.js";import"./import-9JVOK46k.js";import"./chunk-M3MASYO7-ejE7e--3.js";import"./objectWithoutPropertiesLoose-pdUxmcoj.js";import"./_commonjs-dynamic-modules-h-SxKiO4.js";const l=E.create({page:{flexDirection:"column",justifyContent:"space-between",backgroundcolumnor:"#E4E4E4",padding:15,marginBottom:5},header:{width:"100%",display:"flex",flexDirection:"row",justifyContent:"space-between",fontSize:"14px"},font_bold:{fontWeight:"extrabold",fontSize:"11px"},cardContainer:{width:"100%",flexDirection:"row",justifyContent:"center",gap:10},card:{marginTop:10,flexDirection:"column",alignItems:"center",width:"100%"},section:{marginBottom:3,textAlign:"center"},title:{fontSize:14,fontWeight:"extrabold"},table:{display:"table",width:"100%",borderStyle:"solid",borderColor:"#000",borderWidth:1,tableLayout:"fixed",marginTop:10},tableRow:{flexDirection:"row"},tableCell:{borderStyle:"solid",borderColor:"#000",borderWidth:1,padding:1,width:"100%",boxSizing:"border-box",textAlign:"center",fontSize:8},playerNameCell:{width:"35%",borderStyle:"solid",borderColor:"#000",borderWidth:1,padding:1,boxSizing:"border-box",textAlign:"center",fontSize:8},playerDNICell:{width:"20%",borderStyle:"solid",borderColor:"#000",borderWidth:1,padding:1,boxSizing:"border-box",textAlign:"center",fontSize:8}});function v({matches:o}){var x;const a=r=>r==="F7"?"FÚTBOL 7":r==="F11"?"FÚTBOL 11":"HOCKEY";return e.jsx(Y,{children:e.jsx(F,{size:"A4",style:l.page,children:e.jsxs(t,{children:[e.jsx(t,{style:l.header,children:e.jsxs(s,{children:["Partidos de la fecha: ",m((x=o[0])==null?void 0:x.date).format("DD-MM-YY")]})}),e.jsx(t,{style:l.cardContainer,children:e.jsx(t,{style:l.card,children:e.jsxs(t,{style:l.table,children:[e.jsxs(t,{style:l.tableRow,children:[e.jsx(t,{style:l.tableCell,children:e.jsx(s,{children:"Torneo"})}),e.jsx(t,{style:l.tableCell,children:e.jsx(s,{children:"Deporte"})}),e.jsx(t,{style:l.tableCell,children:e.jsx(s,{children:"Categoria"})}),e.jsx(t,{style:l.tableCell,children:e.jsx(s,{children:"Hora"})}),e.jsx(t,{style:l.tableCell,children:e.jsx(s,{children:"Local"})}),e.jsx(t,{style:l.tableCell,children:e.jsx(s,{children:"Visitante"})})]}),o.map(r=>e.jsxs(t,{style:l.tableRow,children:[e.jsx(t,{style:l.tableCell,children:e.jsx(s,{children:r.tournament_id.name})}),e.jsx(t,{style:l.tableCell,children:e.jsx(s,{children:a(r.tournament_id.sport)})}),e.jsx(t,{style:l.tableCell,children:e.jsx(s,{children:r.local.team_id.category_id.name})}),e.jsx(t,{style:l.tableCell,children:e.jsx(s,{children:r.time})}),e.jsx(t,{style:l.tableCell,children:e.jsx(s,{children:r.local.team_id.name})}),e.jsx(t,{style:l.tableCell,children:e.jsx(s,{children:r.visit.team_id.name})})]},r._id))]})})})]})})})}function A({matches:o}){return e.jsx(T,{document:e.jsx(v,{matches:o}),fileName:`fixture_${m(o[0].date).add(1,"days").format("DD-MM-YYYY")}.pdf`,children:({loading:a})=>a?e.jsx("div",{className:"flex gap-2 px-4 py-2 text-sm font-semibold text-black bg-white rounded-full w-fit",children:e.jsx(D,{size:"sm"})}):e.jsx(S,{as:k,endContent:e.jsx(_,{size:20}),size:"sm",className:"flex gap-2 px-4 py-2 text-sm font-semibold text-black bg-white rounded-full w-fit",children:"FIXTURE"})})}const K=()=>{const{isHiddenTopBar:o}=P(),[a,x]=c.useState(m(new Date).format("YYYY-MM-DD")),[r,h]=c.useState(!0),[f,j]=c.useState([]),[u,y]=c.useState([]),g=async n=>{const i=await z(`?team=${n}&state=READY`);if(i.ok){const{response:d}=await i.json();return d}else throw new Error("Something went wrong")},w=async n=>{try{const i=await fetch(`http://localhost:8080/api/matches/?date=${n}`);if(i.ok){const{response:d}=await i.json(),p=d.filter(b=>b.visit);j(p)}}catch(i){console.log(i)}},C=async()=>{try{const n=f.map(async d=>{const[p,b]=await Promise.all([g(d.local.team_id._id),g(d.visit.team_id._id)]);return{...d,localPlayers:p,visitPlayers:b}}),i=await Promise.all(n);y(i)}catch(n){console.error("Error fetching players",n)}finally{h(!1)}};return c.useEffect(()=>{h(!0),y([]),j([]),a&&w(a)},[a]),c.useEffect(()=>{f.length?(h(!0),C()):h(!1)},[f]),e.jsxs("section",{className:`${o?"pt-12":"pt-36"} absolute top-0 left-0 w-full pl-5 lg:pl-[200px] pb-16  lg:pt-20 pr-5 overflow-y-scroll h-screen bg-black`,children:[e.jsx(M,{}),e.jsxs("div",{className:"w-full h-28 flex flex-col text-default-300 p-10 items-center gap-10",children:[e.jsx(N,{date:a,setDate:x}),a?r?e.jsx("p",{children:"Cargando..."}):u.length>0?e.jsx(A,{matches:u}):e.jsx("p",{className:"text-warning",children:"⚠️ No se encontraron fechas disponibles"}):e.jsx("p",{className:"font-medium",children:"Indique la fecha deseada"})]})]})};export{K as default};
