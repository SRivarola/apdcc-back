import{g as y,u as S,r as i,k as _,j as e,b as x,m as w,a as N,l as k,A as v,s as z}from"./index-ud7WvSZc.js";import{c as j}from"./chunk-AMSULWPV-YtnjV3Dt.js";import{m as E,t as A,a as R,b as V,c as H,d as L,e as q}from"./chunk-YRZGWF2W-zd0TKMqz.js";import{m as F}from"./chunk-EPDLEVDR-0vwhT5A0.js";import{m as O,P as Y,p as D}from"./pen-square-MRu9I7uJ.js";function J(){const{setRefresh:r}=y(),{isOpen:u,onOpen:p,onOpenChange:m}=S(),[n,h]=i.useState(!1),[d,a]=i.useState(!1),[s,t]=i.useState(!1),[l,C]=i.useState([]),{register:I,handleSubmit:P,formState:{errors:B}}=_({defaultValues:{name:""}}),b=(f,o)=>{const c=f.target.name;if(!o)C([...l,c]);else{const g=l.filter(T=>T!==c);C(g)}},$=async f=>{const o={...f,sport:l};v.promise(async()=>{const c=localStorage.getItem("apdcc_token");try{if((await fetch("https://apdcc-back-production.up.railway.app/api/categories/create",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json",token:c},body:JSON.stringify(o)})).ok)return r(),"Categoria creado con éxito 😀";throw new Error("Oops, algo salió mal 😕")}catch(g){throw new Error("Error al procesar la solicitud: "+g.message)}},{loading:"Loading...",success:c=>c,error:c=>c.message})};return e.jsxs(e.Fragment,{children:[e.jsx(x,{onPress:p,variant:"faded",color:"default",className:"mb-3",radius:"sm",children:"Nueva Categoria"}),e.jsx(w,{isOpen:u,onOpenChange:m,className:"border dark text-foreground border-default-400",children:e.jsx(N,{children:f=>e.jsxs(e.Fragment,{children:[e.jsx(E,{className:"flex flex-col gap-1",children:"Crear Nueva Categoria"}),e.jsxs(F,{children:[e.jsx(k,{label:"Ingrese la categoria",placeholder:"ejemplo: 5-6",isRequired:!0,variant:"underlined",...I("name")}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx(j,{size:"md",radius:"full",name:"F7",isSelected:n,onValueChange:h,onChange:o=>b(o,n),children:"Futbol 7"}),e.jsx(j,{size:"md",radius:"full",name:"F11",isSelected:d,onValueChange:a,onChange:o=>b(o,d),children:"Futbol 11"}),e.jsx(j,{size:"md",radius:"full",name:"HOCKEY",isSelected:s,onValueChange:t,onChange:o=>b(o,s),children:"Hockey"})]})]}),e.jsx(O,{children:e.jsx(x,{className:"font-semibold uppercase bg-primary/60 hover:bg-primary",radius:"sm",type:"submit",variant:"solid",onPress:()=>{P($)(),f()},children:"Crear"})})]})})})]})}function M({id:r}){const{setRefresh:u}=y(),{isOpen:p,onOpen:m,onOpenChange:n}=S(),{register:h,handleSubmit:d}=_({defaultValues:{name:""}}),a=async s=>{v.promise(async()=>{const t=localStorage.getItem("apdcc_token");try{if((await fetch(`https://apdcc-back-production.up.railway.app/api/categories/${r}`,{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json",token:t},body:JSON.stringify(s)})).ok)return u(),"¡Categoria editada con éxito! 😄";throw new Error("Oops, algo salió mal 😕")}catch(l){throw new Error("Error al procesar la solicitud: "+l.message)}},{loading:"Loading...",success:t=>t,error:t=>t.message})};return e.jsxs(e.Fragment,{children:[e.jsx(x,{isIconOnly:!0,onPress:m,color:"default",size:"sm",className:"bg-default/50 text-default-400 hover:text-white",children:e.jsx(Y,{size:18})}),e.jsx(w,{isOpen:p,onOpenChange:n,className:"border dark text-foreground border-default-400",children:e.jsx(N,{children:s=>e.jsxs(e.Fragment,{children:[e.jsx(E,{className:"flex flex-col gap-1 uppercase",children:"⚠️ Advertencia"}),e.jsxs(F,{children:[e.jsx("div",{children:"Esta acción es permanente y no se puede deshacer."}),e.jsx(k,{placeholder:"Nuevo nombre",label:"Nombre",isRequired:!0,variant:"underlined",...h("name")})]}),e.jsx(O,{children:e.jsx(x,{className:"font-semibold uppercase bg-primary/60 hover:bg-primary",radius:"sm",variant:"solid",onPress:()=>{d(a)(),s()},children:"Editar"})})]})})})]})}const U=[{label:"Categoria",key:"name"},{label:"Años",key:"age"},{label:"Acciones",key:"actions"}];function K(){const[r,u]=i.useState([]),{refresh:p,isHiddenTopBar:m}=y(),[n,h]=i.useState(!0);i.useEffect(()=>{(async()=>{const s=localStorage.getItem("apdcc_token");try{const t=await fetch("https://apdcc-back-production.up.railway.app/api/categories",{method:"GET",credentials:"include",headers:{token:s}});if(t.ok){const{response:l}=await t.json();u(l)}}catch(t){throw new Error(t)}finally{h(!1)}})()},[p]);const d=a=>{const s=new Date().getFullYear(),t=a.split("-");return a==="+30"?`${s-a} o anteriores`:`${s-Number(t[1])} / ${s-Number(t[0])}`};return e.jsxs("section",{className:` ${m?"pt-12":"pt-36"} absolute top-0 left-0 w-full pl-5 lg:pl-[200px] pb-16 lg:pt-20 pr-5 overflow-y-scroll h-screen bg-black`,children:[e.jsx(J,{}),e.jsxs(A,{"aria-label":"Users Table",bottomContent:r.page>0?e.jsx("div",{className:`${r.docs?"opacity-100":"opacity-0"} flex items-center justify-center w-full gap-4`,children:e.jsx(D,{isCompact:!0,showControls:!0,showShadow:!0,color:"primary",page:r.page,total:r.totalPages})}):null,children:[e.jsx(R,{columns:U,children:a=>e.jsx(V,{className:"uppercase",children:a.label},a.key)}),e.jsx(H,{emptyContent:n?" ":r.length===0?"No se encontraron categorias":"",items:n?[]:r,isLoading:n,loadingContent:e.jsx(z,{className:"mt-12",label:"Loading..."}),children:a=>e.jsx(L,{children:s=>e.jsx(q,{className:"capitalize",children:s==="name"?e.jsx("p",{children:a.name}):s==="age"?e.jsx("p",{className:"lowercase",children:d(a.name)}):s==="actions"?e.jsx("div",{className:"flex items-center gap-3",children:e.jsx(M,{id:a._id})}):null})},a._id)})]})]})}export{K as default};
