import{g as h,r,j as e,w as x,s as g,h as j,l as w}from"./index-zsI5OImO.js";import{N as y}from"./NavbarPdf-RQYvkoLE.js";import{I as b}from"./InputDate-tw54YRLl.js";import{D as _}from"./DownloadFixturePDF-75kzRQot.js";import{t as P,a as v,b as D,c as N,d as S,e as C}from"./chunk-YRZGWF2W-Utd-n8kC.js";import{p as E}from"./chunk-BIN3WWJN-Lr0ow_1r.js";import"./chunk-TC4QW7OA-smmxgv9d.js";import"./import-TFnQkHmR.js";import"./import-9JVOK46k.js";import"./chunk-M3MASYO7-ejE7e--3.js";import"./react-pdf.browser-yyG9FPTo.js";import"./objectWithoutPropertiesLoose-pdUxmcoj.js";import"./_commonjs-dynamic-modules-h-SxKiO4.js";import"./LOGO-NEGRO-HORIZONTAL-msT39if3.js";import"./chunk-MA2FG3JE-XEP9XEnx.js";import"./chunk-AMSULWPV-aaCFLJbH.js";import"./chunk-7F3ZLNJ6-ei5zIsh2.js";import"./index-taukuCH3.js";const k=({match:a})=>{h().pathname;const[c,t]=r.useState();async function o(l){const n=await x(`?team=${l}&state=READY`);if(n.ok){const{response:i}=await n.json();return i}else throw new Error("Something went wrong")}const p=async()=>{try{const[l,n]=await Promise.all([o(a.local.team_id._id),o(a.visit.team_id._id)]);t(i=>({...i,localPlayers:l,visitPlayers:n}))}catch(l){console.error("Error fetching players",l)}};return r.useEffect(()=>{p()},[a]),e.jsx("div",{className:"flex mt-3",children:e.jsx(_,{match:a,players:c})})},M=[{label:"Torneo",key:"tournament_id"},{label:"local",key:"local"},{label:"visitante",key:"visit"},{label:"PDF",key:"pdf"}],$=({data:a,isFetching:s,setCurrentPage:c})=>e.jsxs(P,{isStriped:!0,"aria-label":"Tournament Table",className:"shadow-lg shadow-white/10 rounded-xl",bottomContent:a.page>0?e.jsx("div",{className:`${a.docs?"opacity-100":"opacity-0"} flex items-center justify-center w-full gap-4`,children:e.jsx(E,{isCompact:!0,showControls:!0,showShadow:!0,color:"primary",page:a.page,total:a.totalPages,onChange:t=>{c(t)}})}):null,children:[e.jsx(v,{columns:M,children:t=>e.jsx(D,{className:"uppercase",children:t.label},t.key)}),e.jsx(N,{emptyContent:s?" ":a.docs.length===0?"No se encontraron partidos":"",items:s?[]:a.docs,isLoading:s,loadingContent:e.jsx(g,{label:"Loading..."}),children:t=>t.visit?e.jsx(S,{children:o=>e.jsx(C,{className:"capitalize text-white",children:o==="tournament_id"?e.jsx("p",{children:t.tournament_id.name}):o==="local"?e.jsx("p",{children:t.local.team_id.name}):o==="visit"?e.jsx("p",{children:t.visit.team_id.name}):o==="pdf"?e.jsx(k,{match:t}):null})},t._id):null})]}),W=()=>{const{isHiddenTopBar:a}=j(),[s,c]=r.useState(w(new Date).format("YYYY-MM-DD")),[t,o]=r.useState(null),[p,l]=r.useState(1),[n,i]=r.useState(!0),u=async m=>{try{i(!0);const d=await fetch(`http://localhost:8080/api/matches/paginate?date=${m}&page=${p}`);if(d.ok){const{response:f}=await d.json();o(f)}}catch(d){console.log(d)}finally{i(!1)}};return r.useEffect(()=>{s&&u(s)},[s,p]),e.jsxs("section",{className:`${a?"pt-12":"pt-36"} absolute top-0 left-0 w-full pl-5 lg:pl-[200px] pb-16  lg:pt-20 pr-5 overflow-y-scroll h-screen bg-black`,children:[e.jsx(y,{}),e.jsxs("div",{className:"w-full h-full flex flex-col text-default-300 p-10 items-center gap-10",children:[e.jsx(b,{date:s,setDate:c}),t?e.jsx($,{data:t,isFetching:n,setCurrentPage:l}):null]})]})};export{W as default};
