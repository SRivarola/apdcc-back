import{h as j,a as C,r as i,j as e,b as f,m as S,c as _,A as w,t as N,s as A}from"./index-mA4lGN6B.js";import{u as v}from"./index.esm-M5Hnw-ze.js";import{m as E}from"./chunk-3S23ARPO-lBO_DsD2.js";import{m as k}from"./chunk-EPDLEVDR-64-k5SgX.js";import{i as F}from"./chunk-TC4QW7OA-0y-WUtuY.js";import{c as b}from"./chunk-AMSULWPV-ssLgSvvr.js";import{m as O}from"./chunk-QY5NICTW-mN9DSQi7.js";import{P as R}from"./pen-square-Luo8tg3G.js";import{t as V,a as H,b as L,c as q,d as Y,e as D}from"./chunk-YRZGWF2W-sCHXspxZ.js";import{p as J}from"./chunk-BIN3WWJN-RLfkxP78.js";import"./import-PRHj8ZOj.js";import"./import-GOg8Af9x.js";import"./chunk-M3MASYO7-NeubZ4dQ.js";import"./chunk-7F3ZLNJ6-2htM2hSU.js";import"./index-taukuCH3.js";function M(){const{setRefresh:r}=j(),{isOpen:d,onOpen:m,onOpenChange:u}=C(),[l,p]=i.useState(!1),[c,a]=i.useState(!1),[s,t]=i.useState(!1),[g,y]=i.useState([]),{register:P,handleSubmit:$,formState:{errors:G}}=v({defaultValues:{name:""}}),x=(h,o)=>{const n=h.target.name;if(!o)y([...g,n]);else{const I=g.filter(z=>z!==n);y(I)}},T=async h=>{const o={...h,sport:g};w.promise(async()=>{try{if((await fetch("https://apdcc.com.ar/api/categories/create",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json",token:N},body:JSON.stringify(o)})).ok)return r(),"Categoria creado con éxito 😀";throw new Error("Oops, algo salió mal 😕")}catch(n){throw new Error("Error al procesar la solicitud: "+n.message)}},{loading:"Loading...",success:n=>n,error:n=>n.message})};return e.jsxs(e.Fragment,{children:[e.jsx(f,{onPress:m,variant:"faded",color:"default",className:"mb-3",radius:"sm",children:"Nueva Categoria"}),e.jsx(S,{isOpen:d,onOpenChange:u,className:"border dark text-foreground border-default-400",children:e.jsx(_,{children:h=>e.jsxs(e.Fragment,{children:[e.jsx(E,{className:"flex flex-col gap-1",children:"Crear Nueva Categoria"}),e.jsxs(k,{children:[e.jsx(F,{label:"Ingrese la categoria",placeholder:"ejemplo: 5-6",isRequired:!0,variant:"underlined",...P("name")}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx(b,{size:"md",radius:"full",name:"F7",isSelected:l,onValueChange:p,onChange:o=>x(o,l),children:"Futbol 7"}),e.jsx(b,{size:"md",radius:"full",name:"F11",isSelected:c,onValueChange:a,onChange:o=>x(o,c),children:"Futbol 11"}),e.jsx(b,{size:"md",radius:"full",name:"HOCKEY",isSelected:s,onValueChange:t,onChange:o=>x(o,s),children:"Hockey"})]})]}),e.jsx(O,{children:e.jsx(f,{className:"font-semibold uppercase bg-primary/60 hover:bg-primary",radius:"sm",type:"submit",variant:"solid",onPress:()=>{$(T)(),h()},children:"Crear"})})]})})})]})}function U({id:r}){const{setRefresh:d}=j(),{isOpen:m,onOpen:u,onOpenChange:l}=C(),{register:p,handleSubmit:c}=v({defaultValues:{name:""}}),a=async s=>{w.promise(async()=>{try{if((await fetch(`https://apdcc.com.ar/api/categories/${r}`,{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json",token:N},body:JSON.stringify(s)})).ok)return d(),"¡Categoria editada con éxito! 😄";throw new Error("Oops, algo salió mal 😕")}catch(t){throw new Error("Error al procesar la solicitud: "+t.message)}},{loading:"Loading...",success:t=>t,error:t=>t.message})};return e.jsxs(e.Fragment,{children:[e.jsx(f,{isIconOnly:!0,onPress:u,color:"default",size:"sm",className:"bg-default/50 text-default-400 hover:text-white",children:e.jsx(R,{size:18})}),e.jsx(S,{isOpen:m,onOpenChange:l,className:"border dark text-foreground border-default-400",children:e.jsx(_,{children:s=>e.jsxs(e.Fragment,{children:[e.jsx(E,{className:"flex flex-col gap-1 uppercase",children:"⚠️ Advertencia"}),e.jsxs(k,{children:[e.jsx("div",{children:"Esta acción es permanente y no se puede deshacer."}),e.jsx(F,{placeholder:"Nuevo nombre",label:"Nombre",isRequired:!0,variant:"underlined",...p("name")})]}),e.jsx(O,{children:e.jsx(f,{className:"font-semibold uppercase bg-primary/60 hover:bg-primary",radius:"sm",variant:"solid",onPress:()=>{c(a)(),s()},children:"Editar"})})]})})})]})}const B=[{label:"Categoria",key:"name"},{label:"Años",key:"age"},{label:"Acciones",key:"actions"}];function de(){const[r,d]=i.useState([]),{refresh:m,isHiddenTopBar:u}=j(),[l,p]=i.useState(!0);i.useEffect(()=>{(async()=>{try{const s=await fetch("https://apdcc.com.ar/api/categories",{method:"GET",credentials:"include"});if(s.ok){const{response:t}=await s.json();d(t)}}catch(s){throw new Error(s)}finally{p(!1)}})()},[m]);const c=a=>{const s=new Date().getFullYear(),t=a.split("-");return a==="+30"?`${s-a} o anteriores`:`${s-Number(t[1])} / ${s-Number(t[0])}`};return e.jsxs("section",{className:` ${u?"pt-12":"pt-36"} absolute top-0 left-0 w-full pl-5 lg:pl-[200px] pb-16 lg:pt-20 pr-5 overflow-y-scroll h-screen bg-black`,children:[e.jsx(M,{}),e.jsxs(V,{"aria-label":"Users Table",bottomContent:r.page>0?e.jsx("div",{className:`${r.docs?"opacity-100":"opacity-0"} flex items-center justify-center w-full gap-4`,children:e.jsx(J,{isCompact:!0,showControls:!0,showShadow:!0,color:"primary",page:r.page,total:r.totalPages})}):null,children:[e.jsx(H,{columns:B,children:a=>e.jsx(L,{className:"uppercase",children:a.label},a.key)}),e.jsx(q,{emptyContent:l?" ":r.length===0?"No se encontraron categorias":"",items:l?[]:r,isLoading:l,loadingContent:e.jsx(A,{className:"mt-12",label:"Loading..."}),children:a=>e.jsx(Y,{children:s=>e.jsx(D,{className:"capitalize",children:s==="name"?e.jsx("p",{children:a.name}):s==="age"?e.jsx("p",{className:"lowercase",children:c(a.name)}):s==="actions"?e.jsx("div",{className:"flex items-center gap-3",children:e.jsx(U,{id:a._id})}):null})},a._id)})]})]})}export{de as default};
