import{e as j,h as y,r as m,U as N,f as v,j as e,b as k,A as E}from"./index-WqbPWE0E.js";import{z as o,t as S}from"./index-c-RFDuWi.js";import{i as d}from"./chunk-TC4QW7OA-v-iVWaFn.js";import{u as C}from"./index.esm-AaNy5cSr.js";import{U as L}from"./user-I2-vfpzO.js";import{E as z,a as U}from"./eye-AbV4c2mz.js";import"./import-yG13OaeA.js";import"./import-hIBVkbdo.js";import"./chunk-M3MASYO7-kWQ4oELG.js";/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I=j("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),A=o.object({mail:o.string().email({message:"Por favor, ingresa una direcci贸n de correo electr贸nico v谩lida"}),password:o.string().min(8,{message:"La contrase帽a debe contener al menos 8 caracteres"})}),M="https://apdcc-back-production.up.railway.app/api/auth/login";function F(){var l,c;const r=y(),[t,u]=m.useState(!1),{setAuthChange:p}=m.useContext(N),{setAdminRole:x}=v(),f=()=>u(!t),{register:i,handleSubmit:g,formState:{errors:n}}=C({defaultValues:{mail:"",password:""},resolver:S(A)}),h=async b=>{E.promise(async()=>{try{const s=await fetch(M,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(b)});if(s.ok){const a=await s.json();return localStorage.setItem("apdcc_token",a.token),x(a.user.role),p(w=>!w),a.user.role==="JUEZ"?r("/dashboard/judges"):r("/dashboard"),"隆Inicio de sesi贸n exitoso!  隆Bienvenid@!"}else throw new Error("Oops, algo sali贸 mal en el inicio de sesi贸n. ")}catch(s){throw console.log(s),s}},{loading:"Loading...",success:s=>s,error:s=>s.message})};return e.jsx("section",{className:"absolute w-screen h-screen top-0 left-0 flex items-center justify-center px-3 pb-3 bg-black",children:e.jsxs("div",{className:"max-w-xs p-10 m-auto rounded-xl xl:max-w-lg bg-white/10",children:[e.jsxs("h1",{className:"flex items-center justify-center gap-1 pb-2 text-2xl font-medium text-center md:text-4xl md:gap-2",children:[e.jsx(L,{className:"w-6 h-6 md:w-9 md:h-9"}),"Login"]}),e.jsxs("form",{className:"flex flex-col items-center justify-center gap-3 ",onSubmit:g(h),children:[e.jsx(d,{type:"email",id:"mail",isRequired:!0,size:"lg",label:"Email",variant:"underlined",placeholder:"ejemplo@ejemplo.com",className:"max-w-xs",color:"default",errorMessage:(l=n.mail)==null?void 0:l.message,endContent:e.jsx(I,{className:"text-default-400 ",size:22}),...i("mail")}),e.jsx(d,{label:"Password",id:"password",isRequired:!0,size:"lg",variant:"underlined",placeholder:"Enter your password",color:"default",errorMessage:(c=n.password)==null?void 0:c.message,endContent:e.jsx("button",{className:"focus:outline-none",type:"button",onClick:f,children:t?e.jsx(z,{size:22,className:"text-2xl pointer-events-none text-default-400"}):e.jsx(U,{size:22,className:"text-2xl pointer-events-none text-default-400"})}),type:t?"text":"password",className:"max-w-xs ",...i("password")}),e.jsx(k,{className:"w-full mt-2 uppercase font-semibold",type:"submit",variant:"solid",radius:"sm",color:"default",children:"Login"})]})]})})}export{F as default};
