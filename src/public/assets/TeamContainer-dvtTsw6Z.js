import{e as N,f as v,r as n,j as e,b,A as _,q as w,s as j,t as k,v as T}from"./index-gY-4c4Pn.js";import{t as $,a as P,b as S,c as A,d as C,e as E}from"./chunk-YRZGWF2W--PTTFKyQ.js";import{c as U}from"./chunk-OFH6WYRQ-eAuDNscH.js";import{g as z}from"./chunk-KARN4QIT-vB8DnkQD.js";import"./chunk-AMSULWPV-iCzH-2OA.js";import"./import-w3I8uUNv.js";import"./chunk-7F3ZLNJ6-C9cdZtqw.js";import"./chunk-M3MASYO7-Gx-MRvi3.js";/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M=N("UserMinus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q=N("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]),I=[{label:"nombre",key:"name"},{label:"edad",key:"age"},{label:"acciones",key:"actions"}],D=function({players:c,team:d,category:s,teamId:u,setLoading:r,loading:p}){const{setRefresh:m}=v(),[g,o]=n.useState(!0),x=async(a,t)=>{r(!0),_.promise(async()=>{try{const l=await fetch(`https://apdcc-back-production.up.railway.app/api/players/playerteam/${a}`,{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:t,team:u,id:a})});return l.ok?(await l.json(),t==="add"?"Jugador asignado exitosamente ðŸ˜€":"Jugador removido exitosamente ðŸ˜€"):`${(await l.json()).message}`}catch(l){console.error(l)}finally{o(!1),m()}},{loading:"Loading...",success:l=>l,error:()=>"Algo salio mal"})};return n.useEffect(()=>{o(!1)},[]),e.jsxs("section",{className:"relative w-full h-full max-h-full",children:[e.jsxs("div",{className:"flex flex-row items-start justify-between px-3 lg:flex-col",children:[e.jsx("p",{className:"text-lg font-semibold lg:pb-2 lg:text-2xl",children:d?"Asignados":"Disponibles"}),e.jsxs("p",{className:"lg:mb-2 text-default-400 text-small",children:["Total ",c.length," jugadores"]})]}),e.jsx("div",{className:"absolute top-0 left-0 w-full h-full max-h-full pt-10 pb-5 lg:pt-20",children:e.jsxs($,{"aria-label":"Users Table",className:"max-h-full",children:[e.jsx(P,{columns:I,children:a=>e.jsx(S,{className:"uppercase",children:a.label},a.key)}),e.jsx(A,{emptyContent:p?" ":c.length===0?"No se encontraron jugadores en el equipo.":"",items:c,children:a=>e.jsx(C,{children:t=>e.jsx(E,{className:"capitalize ",children:t==="name"?e.jsxs("p",{children:[`${a.first_name} ${a.last_name}`," "]}):t==="age"?e.jsx(U,{color:"warning",variant:s!=="+30"?Number(a.age)>=Number(Number(s.split("-")[0]))&&Number(a.age)<=Number(Number(s.split("-")[1]))?"":"flat":Number(a.age)>=Number(s)?"":"flat",className:"lowercase",children:a.age}):t==="actions"?e.jsx("div",{className:"flex items-center gap-3",children:d?e.jsx(b,{onClick:()=>x(a._id,"remove"),color:"danger",size:"sm",variant:"solid",endContent:e.jsxs("div",{className:"flex items-center gap-1 text-sm font-semibold",children:[e.jsx(M,{size:18}),"Quitar"]})}):e.jsx(b,{onClick:()=>x(a._id,"add"),color:"success",size:"sm",variant:"solid",endContent:e.jsxs("div",{className:"flex items-center gap-1 text-sm font-semibold",children:[e.jsx(q,{size:18}),"Agregar"]})})}):z(a,t)})},a._id)})]})})]})},y=D,V=()=>{const{id:f}=w(),{refresh:c,isHiddenTopBar:d}=v(),[s,u]=n.useState(null),[r,p]=n.useState([]),[m,g]=n.useState([]),[o,x]=n.useState([]),[a,t]=n.useState(!1);return n.useEffect(()=>{(async()=>{const i=await k(f);if(i.ok){const{response:h}=await i.json();u(h)}})()},[f]),n.useEffect(()=>{t(!0),s&&(async()=>{const i=await T(`?category=${s.category_id.name}&state=READY&genre=${s.genre}&country_id=${s.country_id._id}`);if(i.ok){const h=await i.json();p(h.response)}else throw new Error("Something went wrong")})()},[s,c]),n.useEffect(()=>{g(r.filter(l=>l.team.includes(s._id))),x(r.filter(l=>!l.team.includes(s._id))),t(!1)},[r]),e.jsx("section",{className:` ${d?"pt-12":"pt-36"} absolute top-0 left-0 w-full pl-5 lg:pl-[200px] pb-5 lg:pt-20 pr-5 overflow-y-scroll h-screen bg-black`,children:s?e.jsxs("div",{className:"relative w-full h-full flex flex-col",children:[e.jsxs("div",{className:"flex flex-col w-full px-3 mb-0 text-center lg:mb-1",children:[e.jsx("h1",{className:"text-xl font-bold uppercase lg:text-3xl",children:s.name}),e.jsx("span",{className:"font-semibold text-default-400",children:`${s.sport} ${s.genre} ${s.category_id.name}`})]}),e.jsx("div",{className:"flex flex-row h-full items-stretch justify-between gap-6",children:r?e.jsxs(e.Fragment,{children:[a?e.jsxs("section",{className:"relative w-full h-full max-h-full",children:[e.jsx("p",{className:"px-3 pb-2 text-xl font-semibold lg:text-2xl",children:"Asignados"}),e.jsx("div",{className:"flex items-center justify-between px-3",children:e.jsxs("p",{className:"mb-2 text-default-400 text-small",children:["Total ",m.length," jugadores"]})}),e.jsx("div",{className:"flex justify-center mt-10",children:e.jsx(j,{})})]}):e.jsx(y,{players:m,team:!0,teamId:s._id,category:s.category_id.name,loading:a,setLoading:t}),a?e.jsxs("section",{className:"relative w-full h-full max-h-full",children:[e.jsx("p",{className:"px-3 pb-2 text-2xl font-semibold",children:"Disponibles"}),e.jsx("div",{className:"flex items-center justify-between px-3",children:e.jsxs("p",{className:"mb-2 text-default-400 text-small",children:["Total ",o.length," jugadores"]})}),e.jsx("div",{className:"flex justify-center mt-10",children:e.jsx(j,{})})]}):e.jsx(y,{players:o,team:!1,teamId:s._id,category:s.category_id.name,loading:a,setLoading:t})]}):null})]}):null})};export{V as default};
