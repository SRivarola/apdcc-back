import{l as h,j as e,b as f,aW as x,r as i,w as j,s as w,h as g}from"./index-DCjOH8AU.js";import{N as y}from"./NavbarPdf-JL0ZW2aA.js";import{l as b,I as P}from"./InputDate-lhj0UybJ.js";import{a as D}from"./react-pdf.browser-HpCadHQI.js";import{P as v}from"./PDFFix-RpoBTlo5.js";import{t as N}from"./chunk-MA2FG3JE-CFCObeF4.js";import{t as C,a as $,b as F,c as S,d as Y,e as k}from"./chunk-YRZGWF2W-TeM7OBhX.js";import{p as L}from"./chunk-BIN3WWJN-oU8JFqev.js";import"./chunk-TC4QW7OA-rw8c2GU3.js";import"./import-SooKWkA1.js";import"./import-TOm_-0HU.js";import"./chunk-M3MASYO7-A7fsmqpY.js";import"./objectWithoutPropertiesLoose-pdUxmcoj.js";import"./_commonjs-dynamic-modules-h-SxKiO4.js";import"./LOGO-NEGRO-HORIZONTAL-msT39if3.js";import"./chunk-AMSULWPV-4Weq8d1d.js";import"./chunk-7F3ZLNJ6-QlHTBwmP.js";import"./index-taukuCH3.js";function M({match:a,players:s}){const r=`${a.local.team_id.name.toLowerCase().split(" ").join("_")}-${a.visit.team_id.name.toLowerCase().split(" ").join("_")}__${h(a.date).format("DD-MM-YYYY")}`;return e.jsx(D,{document:e.jsx(v,{match:a,players:s}),fileName:`${r}.pdf`,children:({loading:t})=>t?e.jsx(f,{isIconOnly:!0,color:"default",size:"sm",className:"w-fit bg-default/50 text-default-400 hover:text-white my-auto",isLoading:!0,children:e.jsx(x,{size:18})}):e.jsx(N,{content:"Descargar PDF",children:e.jsx(f,{as:b,isIconOnly:!0,color:"default",size:"sm",className:"w-fit bg-default/50 text-default-400 hover:text-white my-auto",children:e.jsx(x,{size:18})})})})}const E=({match:a})=>{const[s,r]=i.useState();async function t(l){const c=await j(`?team=${l}&state=READY`);if(c.ok){const{response:d}=await c.json();return d}else throw new Error("Something went wrong")}const o=async()=>{try{const[l,c]=await Promise.all([t(a.local.team_id._id),t(a.visit.team_id._id)]),d=l.sort((n,p)=>n.last_name[0].localeCompare(p.last_name[0])),u=c.sort((n,p)=>n.last_name[0].localeCompare(p.last_name[0]));r(n=>({...n,localPlayers:d,visitPlayers:u}))}catch(l){console.error("Error fetching players",l)}};return i.useEffect(()=>{o()},[a]),e.jsx("div",{className:"flex mt-3",children:e.jsx(M,{match:a,players:s})})},I=[{label:"Torneo",key:"tournament_id"},{label:"local",key:"local"},{label:"visitante",key:"visit"},{label:"PDF",key:"pdf"}],z=({data:a,isFetching:s,setCurrentPage:r})=>e.jsxs(C,{isStriped:!0,"aria-label":"Tournament Table",className:"shadow-lg shadow-white/10 rounded-xl",bottomContent:a.page>0?e.jsx("div",{className:`${a.docs?"opacity-100":"opacity-0"} flex items-center justify-center w-full gap-4`,children:e.jsx(L,{isCompact:!0,showControls:!0,showShadow:!0,color:"primary",page:a.page,total:a.totalPages,onChange:t=>{r(t)}})}):null,children:[e.jsx($,{columns:I,children:t=>e.jsx(F,{className:"uppercase",children:t.label},t.key)}),e.jsx(S,{emptyContent:s?" ":a.docs.length===0?"No se encontraron partidos":"",items:s?[]:a.docs,isLoading:s,loadingContent:e.jsx(w,{label:"Loading..."}),children:t=>t.visit?e.jsx(Y,{children:o=>e.jsx(k,{className:"capitalize text-white",children:o==="tournament_id"?e.jsx("p",{children:t.tournament_id.name}):o==="local"?e.jsx("p",{children:t.local.team_id.name}):o==="visit"?e.jsx("p",{children:t.visit.team_id.name}):o==="pdf"?e.jsx(E,{match:t}):null})},t._id):null})]}),ae=()=>{const{isHiddenTopBar:a}=g(),[s,r]=i.useState(h(new Date).format("YYYY-MM-DD")),[t,o]=i.useState(null),[l,c]=i.useState(1),[d,u]=i.useState(!0),n=async p=>{try{u(!0);const m=await fetch(`https://apdcc.com.ar/api/matches/paginate?date=${p}&page=${l}`);if(m.ok){const{response:_}=await m.json();o(_)}}catch(m){console.log(m)}finally{u(!1)}};return i.useEffect(()=>{s&&n(s)},[s,l]),e.jsxs("section",{className:`${a?"pt-12":"pt-36"} absolute top-0 left-0 w-full pl-5 lg:pl-[200px] pb-16  lg:pt-20 pr-5 overflow-y-scroll h-screen bg-black`,children:[e.jsx(y,{}),e.jsxs("div",{className:"w-full h-full flex flex-col text-default-300 p-10 items-center gap-10",children:[e.jsx(P,{date:s,setDate:r}),t?e.jsx(z,{data:t,isFetching:d,setCurrentPage:c}):null]})]})};export{ae as default};
