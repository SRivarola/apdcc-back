import{r as n,j as e,w as h,s as x,h as g,l as _}from"./index-jK_72-ix.js";import{N as y}from"./NavbarPdf-NFvDvJeO.js";import{I as j}from"./InputDate-qXwZyHCt.js";import{D as w}from"./DownloadFixturePDF-V-B34_Z1.js";import{t as b,a as P,b as v,c as D,d as N,e as C}from"./chunk-YRZGWF2W-s0JPTv2w.js";import{p as S}from"./chunk-BIN3WWJN-Kj_29VbX.js";import"./chunk-TC4QW7OA-tGXdaus1.js";import"./import-X2cItMnZ.js";import"./import-xrrh1F1u.js";import"./chunk-M3MASYO7-4XqQonpj.js";import"./react-pdf.browser-mRYYj7bC.js";import"./objectWithoutPropertiesLoose-pdUxmcoj.js";import"./_commonjs-dynamic-modules-h-SxKiO4.js";import"./LOGO-NEGRO-HORIZONTAL-msT39if3.js";import"./chunk-MPX6TMFQ-9g8nLsCP.js";import"./chunk-MA2FG3JE-s4xWTF-3.js";import"./chunk-AMSULWPV-9D4RmpSH.js";import"./chunk-7F3ZLNJ6-hCYGzqY6.js";import"./index-taukuCH3.js";const E=({match:a})=>{const[s,c]=n.useState();async function t(r){const i=await h(`?team=${r}&state=READY`);if(i.ok){const{response:p}=await i.json();return p}else throw new Error("Something went wrong")}const o=async()=>{try{const[r,i]=await Promise.all([t(a.local.team_id._id),t(a.visit.team_id._id)]),p=r.sort((l,d)=>l.last_name[0].localeCompare(d.last_name[0])),m=i.sort((l,d)=>l.last_name[0].localeCompare(d.last_name[0]));c(l=>({...l,localPlayers:p,visitPlayers:m}))}catch(r){console.error("Error fetching players",r)}};return n.useEffect(()=>{o()},[a]),e.jsx("div",{className:"flex mt-3",children:e.jsx(w,{match:a,players:s})})},k=[{label:"Torneo",key:"tournament_id"},{label:"local",key:"local"},{label:"visitante",key:"visit"},{label:"PDF",key:"pdf"}],M=({data:a,isFetching:s,setCurrentPage:c})=>e.jsxs(b,{isStriped:!0,"aria-label":"Tournament Table",className:"shadow-lg shadow-white/10 rounded-xl",bottomContent:a.page>0?e.jsx("div",{className:`${a.docs?"opacity-100":"opacity-0"} flex items-center justify-center w-full gap-4`,children:e.jsx(S,{isCompact:!0,showControls:!0,showShadow:!0,color:"primary",page:a.page,total:a.totalPages,onChange:t=>{c(t)}})}):null,children:[e.jsx(P,{columns:k,children:t=>e.jsx(v,{className:"uppercase",children:t.label},t.key)}),e.jsx(D,{emptyContent:s?" ":a.docs.length===0?"No se encontraron partidos":"",items:s?[]:a.docs,isLoading:s,loadingContent:e.jsx(x,{label:"Loading..."}),children:t=>t.visit?e.jsx(N,{children:o=>e.jsx(C,{className:"capitalize text-white",children:o==="tournament_id"?e.jsx("p",{children:t.tournament_id.name}):o==="local"?e.jsx("p",{children:t.local.team_id.name}):o==="visit"?e.jsx("p",{children:t.visit.team_id.name}):o==="pdf"?e.jsx(E,{match:t}):null})},t._id):null})]}),W=()=>{const{isHiddenTopBar:a}=g(),[s,c]=n.useState(_(new Date).format("YYYY-MM-DD")),[t,o]=n.useState(null),[r,i]=n.useState(1),[p,m]=n.useState(!0),l=async d=>{try{m(!0);const u=await fetch(`https://apdcc.com.ar/api/matches/paginate?date=${d}&page=${r}`);if(u.ok){const{response:f}=await u.json();o(f)}}catch(u){console.log(u)}finally{m(!1)}};return n.useEffect(()=>{s&&l(s)},[s,r]),e.jsxs("section",{className:`${a?"pt-12":"pt-36"} absolute top-0 left-0 w-full pl-5 lg:pl-[200px] pb-16  lg:pt-20 pr-5 overflow-y-scroll bg-black`,children:[e.jsx(y,{}),e.jsxs("div",{className:"w-full h-full flex flex-col text-default-300 p-10 items-center gap-10",children:[e.jsx(j,{date:s,setDate:c}),t?e.jsx(M,{data:t,isFetching:p,setCurrentPage:i}):null]})]})};export{W as default};
