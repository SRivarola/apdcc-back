import{r as i,j as e,f as S,b as y,A as V,u as R,m as I,a as M,s as G,E as Z}from"./index-WqbPWE0E.js";import{z as w,t as B}from"./index-c-RFDuWi.js";import{i as x}from"./chunk-TC4QW7OA-v-iVWaFn.js";import{u as F}from"./index.esm-AaNy5cSr.js";import{s as T,l as k}from"./chunk-ZFWMN6TD-2mDsgrVL.js";import{E as z,a as P}from"./eye-AbV4c2mz.js";import{U as H}from"./user-I2-vfpzO.js";import{m as A}from"./chunk-3S23ARPO-eiL4WC3X.js";import{m as O}from"./chunk-EPDLEVDR-54dcRee3.js";import{T as Q}from"./trash-2-6I61b9He.js";import{c as Y}from"./chunk-OFH6WYRQ-oWe43lFJ.js";import{m as D}from"./chunk-QY5NICTW-_zE6iGR2.js";import{F as W}from"./Filters-dfVvMkwQ.js";import{P as X}from"./pen-square-aFwKzsj7.js";import{t as K,a as ee,b as se,c as ae,d as re,e as te}from"./chunk-YRZGWF2W-hcMjxO4J.js";import{p as le}from"./chunk-BIN3WWJN-MMgnA3-P.js";import{g as ne}from"./chunk-KARN4QIT-0lg9pr17.js";import"./import-yG13OaeA.js";import"./import-hIBVkbdo.js";import"./chunk-M3MASYO7-kWQ4oELG.js";import"./chunk-7F3ZLNJ6-12qWG1A4.js";import"./search-sQfN_xwV.js";import"./chunk-AMSULWPV-a7khhzyU.js";const oe=w.object({mail:w.string().email({message:"Por favor, ingresa una direcci√≥n de correo electr√≥nico v√°lida"}),first_name:w.string().min(3,{message:"El nombre debe tener al menos 3 caracteres"}),last_name:w.string().min(3,{message:"El apellido debe tener al menos 3 caracteres"}),password:w.string().min(8,{message:"La contrase√±a debe contener al menos 8 caracteres"}),confirmPassword:w.string().min(8,{message:"La contrase√±a de confirmaci√≥n debe contener al menos 8 caracteres"}),role:w.string(),country:w.string().optional()}).refine(n=>n.confirmPassword===n.password,{message:"Las contrase√±as no coinciden",path:["confirmPassword"]});function L({register:n,isManagerSelected:t}){const[u,a]=i.useState([]);return i.useEffect(()=>{(async()=>{try{const l=await fetch("https://apdcc-back-production.up.railway.app/api/countries/all",{cache:"no-cache"});if(l.ok){const g=await l.json();a(g.response)}}catch(l){throw new Error(l)}})()},[]),e.jsx(T,{className:"max-w-xs dark text-foreground ",...t?{isRequired:!0}:{},label:"Countries",size:"sm",variant:"underlined",color:"default",...n("country"),children:u.map(d=>e.jsx(k,{variant:"flat",className:"uppercase",children:d.name},d._id))})}function J({register:n,setIsManagerSelected:t}){return e.jsxs(T,{isRequired:!0,id:"role",label:"Rol",size:"sm",variant:"underlined",...n("role"),children:[e.jsx(k,{id:"ADMIN",startContent:e.jsx("img",{className:"w-6 h-6 p-1 uppercase bg-black rounded-full",src:"/admin.svg",alt:"icono de admin"}),className:"uppercase",onClick:()=>t(!1),children:"Admin"},"ADMIN"),e.jsx(k,{id:"MANAGER",startContent:e.jsx("img",{className:"w-6 h-6 p-1 uppercase bg-black rounded-full ",src:"/arbitro.svg",alt:"icono de admin"}),className:"uppercase",onClick:()=>t(!0),children:"Coordinador"},"MANAGER"),e.jsx(k,{id:"JUEZ",startContent:e.jsx("img",{className:"w-6 h-6 p-1 uppercase bg-black rounded-full",src:"/manager.svg",alt:"icono de admin"}),className:"uppercase",onClick:()=>t(!1),children:"√Årbitro"},"JUEZ")]})}function ie(){var h,c,_,j,C;const{setRefresh:n}=S(),[t,u]=i.useState(!1),[a,d]=i.useState(!1),[l,g]=i.useState(!1),p=()=>u(!t),o=()=>d(!a),{register:r,handleSubmit:N,formState:{errors:s},reset:m}=F({defaultValues:{mail:"",first_name:"",last_name:"",password:"",confirmPassword:"",role:""},resolver:B(oe)}),b=async v=>{const E=localStorage.getItem("apdcc_token");V.promise(async()=>{try{if((await fetch("https://apdcc-back-production.up.railway.app/api/auth/register",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json",token:E},body:JSON.stringify(v)})).ok)return n(),m(),"¬°Registro Exitoso! üòÑ ¬°Bienvenid@!";throw new Error("Oops, algo sali√≥ mal en el registro. üòï")}catch(f){throw console.log(f),f}},{loading:"Loading...",success:f=>f,error:f=>f.message})};return e.jsxs("form",{className:"flex flex-col items-center justify-center gap-3 ",onSubmit:N(b),children:[e.jsx(x,{label:"Email",id:"mail",isRequired:!0,type:"email",size:"lg",placeholder:"ejemplo",variant:"underlined",color:"default",isInvalid:!1,errorMessage:(h=s.mail)==null?void 0:h.message,...r("mail")}),e.jsxs("div",{className:"flex flex-col w-full gap-4 md:flex-row",children:[e.jsx(x,{type:"text",id:"first_name",isRequired:!0,size:"lg",label:"Nombre",variant:"underlined",placeholder:"Juan",className:"max-w-xs",color:"default",isInvalid:!1,errorMessage:(c=s.first_name)==null?void 0:c.message,...r("first_name")}),e.jsx(x,{type:"text",id:"last_name",isRequired:!0,size:"lg",label:"Apellido",variant:"underlined",placeholder:"Perez",className:"max-w-xs",color:"default",isInvalid:!1,errorMessage:(_=s.last_name)==null?void 0:_.message,...r("last_name")})]}),e.jsxs("div",{className:"flex flex-col order-3 w-full gap-4 md:flex-row",children:[e.jsx(x,{label:"Contrase√±a",id:"password",isRequired:!0,size:"lg",variant:"underlined",placeholder:"Ingrese su contrase√±a",color:"default",isInvalid:!1,errorMessage:(j=s.password)==null?void 0:j.message,endContent:e.jsx("button",{className:"focus:outline-none",type:"button",onClick:p,children:t?e.jsx(z,{size:22,className:"text-2xl pointer-events-none text-default-400"}):e.jsx(P,{size:22,className:"text-2xl pointer-events-none text-default-400"})}),type:t?"text":"password",className:"max-w-xs ",...r("password")}),e.jsx(x,{label:"Repetir contrase√±a",id:"confirmPassword",isRequired:!0,size:"lg",variant:"underlined",placeholder:"Repita su contrase√±a",color:"default",isInvalid:!1,errorMessage:(C=s.confirmPassword)==null?void 0:C.message,endContent:e.jsx("button",{className:"focus:outline-none",type:"button",onClick:o,children:a?e.jsx(z,{size:22,className:"text-2xl pointer-events-none text-default-400"}):e.jsx(P,{size:22,className:"text-2xl pointer-events-none text-default-400"})}),type:a?"text":"password",className:"max-w-xs",...r("confirmPassword")})]}),e.jsxs("div",{className:"flex flex-col order-first w-full gap-4 md:flex-row",children:[e.jsx(J,{register:r,setIsManagerSelected:g}),l&&e.jsx(L,{register:r,isManagerSelected:l})]}),e.jsx(y,{type:"submit",className:"order-last w-full mt-2 uppercase font-semibold bg-primary/60 hover:bg-primary",variant:"solid",radius:"sm",children:"Registrar"})]})}function ce(){const{isOpen:n,onOpen:t,onOpenChange:u}=R();return e.jsxs(e.Fragment,{children:[e.jsx(y,{onPress:t,variant:"faded",color:"default",className:"mb-3",radius:"sm",children:"Nuevo Usuario"}),e.jsx(I,{isOpen:n,onOpenChange:u,size:"2xl",backdrop:"blur",className:"border dark text-foreground border-default-400",children:e.jsx(M,{children:a=>e.jsxs(e.Fragment,{children:[e.jsxs(A,{className:"flex items-start gap-1",children:[e.jsx(H,{size:22}),"Registrar nuevo usuario"]}),e.jsx(O,{className:"pb-10",children:e.jsx(ie,{})})]})})})]})}function de({id:n,role:t,name:u}){const{setRefresh:a}=S(),{isOpen:d,onOpen:l,onOpenChange:g}=R(),p=async()=>{V.promise(async()=>{const o=localStorage.getItem("apdcc_token");try{if((await fetch(`https://apdcc-back-production.up.railway.app/api/auth/${n}`,{method:"DELETE",credentials:"include",headers:{token:o}})).ok)return a(),"¬°Usuario eliminado con √©xito! üòÑ";throw new Error("Oops, algo sali√≥ mal üòï")}catch(r){throw new Error("Error al procesar la solicitud: "+r.message)}},{loading:"Loading...",success:o=>o,error:o=>o.message})};return e.jsxs(e.Fragment,{children:[e.jsx(y,{isIconOnly:!0,onPress:l,color:"danger",size:"sm",className:"transition-all bg-danger/40 hover:bg-danger duration-350",children:e.jsx(Q,{size:18})}),e.jsx(I,{size:"xl",isOpen:d,onOpenChange:g,className:"border dark text-foreground border-default-400",children:e.jsx(M,{children:o=>e.jsxs(e.Fragment,{children:[e.jsx(A,{className:"flex flex-col gap-1 uppercase",children:"‚ö†Ô∏è Advertencia"}),e.jsx(O,{children:e.jsxs("div",{children:["Est√° a punto de eliminar un ",e.jsx(Y,{children:t})," (",u,"). Esta acci√≥n es permanente y no se puede deshacer. ¬øEst√° seguro de que desea continuar?"]})}),e.jsx(D,{children:e.jsx(y,{className:"font-semibold uppercase rounded-md bg-danger/50 hover:bg-danger",onPress:()=>{p(),o()},children:"Eliminar"})})]})})})]})}function me({id:n,role:t,name:u,state:a}){S();const{isOpen:d,onOpen:l,onOpenChange:g}=R(),[p,o]=i.useState(!1),[r,N]=i.useState(!1),[s,m]=i.useState(!1),b=()=>o(!p),h=()=>N(!r),{register:c,handleSubmit:_,formState:{errors:j}}=F({defaultValues:{first_name:""}}),C=async v=>{console.log(v)};return e.jsxs(e.Fragment,{children:[e.jsx(y,{isIconOnly:!0,onPress:l,color:"default",size:"sm",className:`${a==="READY"?"opacity-0 cursor-default pointer-events-none":"opacity-100"} bg-default/50 text-default-400 hover:text-white`,children:e.jsx(X,{size:18})}),e.jsx(I,{size:"2xl",isOpen:d,onOpenChange:g,className:"border dark text-foreground border-default-400",children:e.jsx(M,{children:v=>{var E,f,q,$,U;return e.jsxs(e.Fragment,{children:[e.jsx(A,{className:"flex flex-col gap-1 uppercase",children:"‚ö†Ô∏è Advertencia"}),e.jsxs(O,{children:[e.jsx("p",{children:"Esta acci√≥n es permanente y no se puede deshacer."}),e.jsxs("form",{className:"flex flex-col items-center justify-center gap-3 ",children:[e.jsx(x,{label:"Email",id:"mail",isRequired:!0,type:"email",size:"lg",placeholder:"ejemplo",variant:"underlined",color:"default",isInvalid:!1,errorMessage:(E=j.mail)==null?void 0:E.message,...c("mail")}),e.jsxs("div",{className:"flex flex-col w-full gap-4 md:flex-row",children:[e.jsx(x,{type:"text",id:"first_name",isRequired:!0,size:"lg",label:"Nombre",variant:"underlined",placeholder:"Juan",className:"max-w-xs",color:"default",isInvalid:!1,errorMessage:(f=j.first_name)==null?void 0:f.message,...c("first_name")}),e.jsx(x,{type:"text",id:"last_name",isRequired:!0,size:"lg",label:"Apellido",variant:"underlined",placeholder:"Perez",className:"max-w-xs",color:"default",isInvalid:!1,errorMessage:(q=j.last_name)==null?void 0:q.message,...c("last_name")})]}),e.jsxs("div",{className:"flex flex-col order-3 w-full gap-4 md:flex-row",children:[e.jsx(x,{label:"Contrase√±a",id:"password",isRequired:!0,size:"lg",variant:"underlined",placeholder:"Ingrese su contrase√±a",color:"default",isInvalid:!1,errorMessage:($=j.password)==null?void 0:$.message,endContent:e.jsx("button",{className:"focus:outline-none",type:"button",onClick:b,children:p?e.jsx(z,{size:22,className:"text-2xl pointer-events-none text-default-400"}):e.jsx(P,{size:22,className:"text-2xl pointer-events-none text-default-400"})}),type:p?"text":"password",className:"max-w-xs ",...c("password")}),e.jsx(x,{label:"Repetir contrase√±a",id:"confirmPassword",isRequired:!0,size:"lg",variant:"underlined",placeholder:"Repita su contrase√±a",color:"default",isInvalid:!1,errorMessage:(U=j.confirmPassword)==null?void 0:U.message,endContent:e.jsx("button",{className:"focus:outline-none",type:"button",onClick:h,children:r?e.jsx(z,{size:22,className:"text-2xl pointer-events-none text-default-400"}):e.jsx(P,{size:22,className:"text-2xl pointer-events-none text-default-400"})}),type:r?"text":"password",className:"max-w-xs",...c("confirmPassword")})]}),e.jsxs("div",{className:"flex flex-col order-first w-full gap-4 md:flex-row",children:[e.jsx(J,{register:c,setIsManagerSelected:m}),e.jsx(L,{register:c})]})]})]}),e.jsx(D,{children:e.jsx(y,{variant:"solid",radius:"sm",className:"font-semibold uppercase bg-primary/60 hover:bg-primary",onPress:()=>{_(C)(),v()},children:"Editar"})})]})}})})]})}const ue=[{label:"nombre",key:"name"},{label:"funci√≥n",key:"role"},{label:"country",key:"country"},{label:"email",key:"mail"},{label:"acciones",key:"actions"}],pe=function(){const{refresh:t,isHiddenTopBar:u}=S(),[a,d]=i.useState({docs:[],totalDocs:0,limit:10,totalPages:0,page:0,pagingCounter:0,hasPrevPage:!1,hasNextPage:!1,prevPage:null,nextPage:null}),[l,g]=i.useState({category_id:{name:""}}),[p,o]=i.useState(!0),[r,N]=i.useState(1);return i.useEffect(()=>{(async()=>{const m=localStorage.getItem("apdcc_token"),b=`https://apdcc-back-production.up.railway.app/api/auth/all?page=${r}`;try{const h=await fetch(b,{method:"GET",credentials:"include",headers:{token:m,queries:JSON.stringify(l)}});if(h.ok){const c=await h.json();d(c.response)}}catch(h){throw new Error(h)}finally{o(!1)}})()},[r,l,t]),e.jsxs("section",{className:` ${u?"pt-12":"pt-36"} absolute top-0 left-0 w-full pl-5 lg:pl-[200px] pb-16 lg:pt-20 pr-5 overflow-y-scroll h-screen bg-black`,children:[e.jsxs("div",{className:"flex flex-wrap items-start justify-between w-full gap-4 pb-4 ",children:[e.jsx(ce,{}),e.jsx(W,{setQueries:g,queries:l,countriesFilter:!0})]}),e.jsxs("div",{className:"flex items-center justify-between px-3",children:[e.jsxs("p",{className:"mb-2 text-default-400 text-small",children:["Total ",a.totalDocs," usuarios"]}),e.jsxs("p",{className:"mb-2 text-default-400 text-small",children:["P√°gina ",a.page]})]}),e.jsxs(K,{"aria-label":"Users Table",bottomContent:a.page>0?e.jsx("div",{className:`${a.docs?"opacity-100":"opacity-0"} flex items-center justify-center w-full gap-4`,children:e.jsx(le,{isCompact:!0,showControls:!0,showShadow:!0,color:"primary",page:a.page,total:a.totalPages,onChange:s=>N(s)})}):null,children:[e.jsx(ee,{columns:ue,children:s=>e.jsx(se,{className:"uppercase",allowsSorting:s.key!=="country"&&s.key!=="actions",children:s.label},s.key)}),e.jsx(ae,{emptyContent:p?" ":a.docs.length===0?"No se encontraron usuarios":"",items:a.docs,isLoading:p,loadingContent:e.jsx(G,{className:"mt-12",label:"Loading..."}),children:s=>e.jsx(re,{children:m=>{var b;return e.jsx(te,{children:m==="name"?e.jsx(Z,{avatarProps:{size:"sm",className:"p-2",radius:"sm",src:s.role==="ADMIN"?"/admin.svg":s.role==="MANAGER"?"/manager.svg":"/arbitro.svg"},name:`${s.first_name} ${s.last_name}`}):m==="role"?e.jsx("p",{className:"capitalize",children:s.role==="JUEZ"?"√Årbitro":s.role==="MANAGER"?"Coordinador":s.role.toLowerCase()}):m==="actions"?e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(me,{id:s._id,role:s.role,name:`${s.first_name} ${s.last_name}`}),e.jsx(de,{id:s._id,role:s.role,name:`${s.first_name} ${s.last_name}`})]}):m==="country"?e.jsx("p",{children:(b=s.country_id)!=null&&b.name?s.country_id.name.toLowerCase():"-"}):ne(s,m)})}},s._id)})]})]})},$e=pe;export{$e as default};
