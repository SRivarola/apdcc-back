import{r as i,j as e,f as R,b as N,A as S,u as M,m as I,a as A,s as B,G as H,H as Q}from"./index-gY-4c4Pn.js";import{z as w,t as Y}from"./index-2lQQuaxW.js";import{i as f}from"./chunk-TC4QW7OA-VsCRhUWu.js";import{u as L}from"./index.esm-yb9kL6Xy.js";import{s as D,l as k}from"./chunk-ZFWMN6TD-C0jJmDCu.js";import{E as z,a as P}from"./eye-ah2YIlDW.js";import{U as W}from"./user-4j2_fRgh.js";import{m as O}from"./chunk-3S23ARPO-uwA9chvb.js";import{m as U}from"./chunk-EPDLEVDR-C6CXGki3.js";import{T as X}from"./trash-2-cOIgRtqe.js";import{c as K}from"./chunk-OFH6WYRQ-eAuDNscH.js";import{m as J}from"./chunk-QY5NICTW-ClXt8GYB.js";import{F as ee}from"./Filters-guZ_RHOE.js";import{P as se}from"./pen-square-SkZYJzHu.js";import{t as ae,a as re,b as te,c as le,d as oe,e as ne}from"./chunk-YRZGWF2W--PTTFKyQ.js";import{p as ie}from"./chunk-BIN3WWJN-nKUXKuKD.js";import{g as ce}from"./chunk-KARN4QIT-vB8DnkQD.js";import"./import-e7HjmEng.js";import"./import-w3I8uUNv.js";import"./chunk-M3MASYO7-Gx-MRvi3.js";import"./chunk-7F3ZLNJ6-C9cdZtqw.js";import"./chunk-AMSULWPV-iCzH-2OA.js";const de=w.object({mail:w.string().email({message:"Por favor, ingresa una direcci√≥n de correo electr√≥nico v√°lida"}),first_name:w.string().min(3,{message:"El nombre debe tener al menos 3 caracteres"}),last_name:w.string().min(3,{message:"El apellido debe tener al menos 3 caracteres"}),password:w.string().min(8,{message:"La contrase√±a debe contener al menos 8 caracteres"}),confirmPassword:w.string().min(8,{message:"La contrase√±a de confirmaci√≥n debe contener al menos 8 caracteres"}),role:w.string(),country_id:w.string().optional()}).refine(l=>l.confirmPassword===l.password,{message:"Las contrase√±as no coinciden",path:["confirmPassword"]});function G({register:l,isManagerSelected:t}){const[u,a]=i.useState([]);return console.log(u),i.useEffect(()=>{(async()=>{try{const o=await fetch("https://apdcc-back-production.up.railway.app/api/countries/all");if(o.ok){const x=await o.json();a(x.response)}}catch(o){throw new Error(o)}})()},[]),e.jsx(D,{className:"max-w-xs dark text-foreground ",...t?{isRequired:!0}:{},label:"Countries",size:"sm",variant:"underlined",color:"default",...l("country_id"),children:u.map(n=>e.jsx(k,{variant:"flat",className:"uppercase",value:n._id,children:n.name},n._id))})}function Z({register:l,setIsManagerSelected:t}){return e.jsxs(D,{isRequired:!0,id:"role",label:"Rol",size:"sm",variant:"underlined",...l("role"),children:[e.jsx(k,{id:"ADMIN",startContent:e.jsx("img",{className:"w-6 h-6 p-1 uppercase bg-black rounded-full",src:"/admin.svg",alt:"icono de admin"}),className:"uppercase",onClick:()=>t(!1),children:"Admin"},"ADMIN"),e.jsx(k,{id:"MANAGER",startContent:e.jsx("img",{className:"w-6 h-6 p-1 uppercase bg-black rounded-full ",src:"/arbitro.svg",alt:"icono de admin"}),className:"uppercase",onClick:()=>t(!0),children:"Coordinador"},"MANAGER"),e.jsx(k,{id:"JUEZ",startContent:e.jsx("img",{className:"w-6 h-6 p-1 uppercase bg-black rounded-full",src:"/manager.svg",alt:"icono de admin"}),className:"uppercase",onClick:()=>t(!1),children:"√Årbitro"},"JUEZ")]})}function ue(){var v,_,p,C,j;const{setRefresh:l}=R(),[t,u]=i.useState(!1),[a,n]=i.useState(!1),[o,x]=i.useState(!1),h=()=>u(!t),r=()=>n(!a),{register:c,handleSubmit:y,formState:{errors:s},reset:d}=L({defaultValues:{mail:"",first_name:"",last_name:"",password:"",confirmPassword:"",role:""},resolver:Y(de)}),b=async E=>{console.log(E),S.promise(async()=>{try{if((await fetch("https://apdcc-back-production.up.railway.app/api/auth/register",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(E)})).ok)return l(),d(),"¬°Registro Exitoso! üòÑ ¬°Bienvenid@!";throw new Error("Oops, algo sali√≥ mal en el registro. üòï")}catch(m){throw console.log(m),m}},{loading:"Loading...",success:m=>m,error:m=>m.message})};return e.jsxs("form",{className:"flex flex-col items-center justify-center gap-3 ",onSubmit:y(b),children:[e.jsx(f,{label:"Email",id:"mail",isRequired:!0,type:"email",size:"lg",placeholder:"ejemplo",variant:"underlined",color:"default",isInvalid:!1,errorMessage:(v=s.mail)==null?void 0:v.message,...c("mail")}),e.jsxs("div",{className:"flex flex-col w-full gap-4 md:flex-row",children:[e.jsx(f,{type:"text",id:"first_name",isRequired:!0,size:"lg",label:"Nombre",variant:"underlined",placeholder:"Juan",className:"max-w-xs",color:"default",isInvalid:!1,errorMessage:(_=s.first_name)==null?void 0:_.message,...c("first_name")}),e.jsx(f,{type:"text",id:"last_name",isRequired:!0,size:"lg",label:"Apellido",variant:"underlined",placeholder:"Perez",className:"max-w-xs",color:"default",isInvalid:!1,errorMessage:(p=s.last_name)==null?void 0:p.message,...c("last_name")})]}),e.jsxs("div",{className:"flex flex-col order-3 w-full gap-4 md:flex-row",children:[e.jsx(f,{label:"Contrase√±a",id:"password",isRequired:!0,size:"lg",variant:"underlined",placeholder:"Ingrese su contrase√±a",color:"default",isInvalid:!1,errorMessage:(C=s.password)==null?void 0:C.message,endContent:e.jsx("button",{className:"focus:outline-none",type:"button",onClick:h,children:t?e.jsx(z,{size:22,className:"text-2xl pointer-events-none text-default-400"}):e.jsx(P,{size:22,className:"text-2xl pointer-events-none text-default-400"})}),type:t?"text":"password",className:"max-w-xs ",...c("password")}),e.jsx(f,{label:"Repetir contrase√±a",id:"confirmPassword",isRequired:!0,size:"lg",variant:"underlined",placeholder:"Repita su contrase√±a",color:"default",isInvalid:!1,errorMessage:(j=s.confirmPassword)==null?void 0:j.message,endContent:e.jsx("button",{className:"focus:outline-none",type:"button",onClick:r,children:a?e.jsx(z,{size:22,className:"text-2xl pointer-events-none text-default-400"}):e.jsx(P,{size:22,className:"text-2xl pointer-events-none text-default-400"})}),type:a?"text":"password",className:"max-w-xs",...c("confirmPassword")})]}),e.jsxs("div",{className:"flex flex-col order-first w-full gap-4 md:flex-row",children:[e.jsx(Z,{register:c,setIsManagerSelected:x}),o&&e.jsx(G,{register:c,isManagerSelected:o})]}),e.jsx(N,{type:"submit",className:"order-last w-full mt-2 uppercase font-semibold bg-primary/60 hover:bg-primary",variant:"solid",radius:"sm",children:"Registrar"})]})}function me(){const{isOpen:l,onOpen:t,onOpenChange:u}=M();return e.jsxs(e.Fragment,{children:[e.jsx(N,{onPress:t,variant:"faded",color:"default",className:"mb-3",radius:"sm",children:"Nuevo Usuario"}),e.jsx(I,{isOpen:l,onOpenChange:u,size:"2xl",backdrop:"blur",className:"border dark text-foreground border-default-400",children:e.jsx(A,{children:a=>e.jsxs(e.Fragment,{children:[e.jsxs(O,{className:"flex items-start gap-1",children:[e.jsx(W,{size:22}),"Registrar nuevo usuario"]}),e.jsx(U,{className:"pb-10",children:e.jsx(ue,{})})]})})})]})}function pe({id:l,role:t,name:u}){const{setRefresh:a}=R(),{isOpen:n,onOpen:o,onOpenChange:x}=M(),h=async()=>{S.promise(async()=>{try{if((await fetch(`https://apdcc-back-production.up.railway.app/api/auth/${l}`,{method:"DELETE",credentials:"include"})).ok)return a(),"¬°Usuario eliminado con √©xito! üòÑ";throw new Error("Oops, algo sali√≥ mal üòï")}catch(r){throw new Error("Error al procesar la solicitud: "+r.message)}},{loading:"Loading...",success:r=>r,error:r=>r.message})};return e.jsxs(e.Fragment,{children:[e.jsx(N,{isIconOnly:!0,onPress:o,color:"danger",size:"sm",className:"transition-all bg-danger/40 hover:bg-danger duration-350",children:e.jsx(X,{size:18})}),e.jsx(I,{size:"xl",isOpen:n,onOpenChange:x,className:"border dark text-foreground border-default-400",children:e.jsx(A,{children:r=>e.jsxs(e.Fragment,{children:[e.jsx(O,{className:"flex flex-col gap-1 uppercase",children:"‚ö†Ô∏è Advertencia"}),e.jsx(U,{children:e.jsxs("div",{children:["Est√° a punto de eliminar un ",e.jsx(K,{children:t})," (",u,"). Esta acci√≥n es permanente y no se puede deshacer. ¬øEst√° seguro de que desea continuar?"]})}),e.jsx(J,{children:e.jsx(N,{className:"font-semibold uppercase rounded-md bg-danger/50 hover:bg-danger",onPress:()=>{h(),r()},children:"Eliminar"})})]})})})]})}function fe({id:l,role:t,name:u,state:a}){const{setRefresh:n}=R(),{isOpen:o,onOpen:x,onOpenChange:h}=M(),[r,c]=i.useState(!1),[y,s]=i.useState(!1),[d,b]=i.useState(!1),v=()=>c(!r),_=()=>s(!y),{register:p,handleSubmit:C,formState:{errors:j}}=L({defaultValues:{first_name:""}}),E=async m=>{S.promise(async()=>{try{if((await fetch(`https://apdcc-back-production.up.railway.app/api/auth/${l}`,{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(m)})).ok)return n(),"¬°Usuario editado con √©xito! üòÑ";throw new Error("Oops, algo sali√≥ mal üòï")}catch(g){throw new Error("Error al procesar la solicitud: "+g.message)}},{loading:"Loading...",success:g=>g,error:g=>g.message})};return e.jsxs(e.Fragment,{children:[e.jsx(N,{isIconOnly:!0,onPress:x,color:"default",size:"sm",className:`${a==="READY"?"opacity-0 cursor-default pointer-events-none":"opacity-100"} bg-default/50 text-default-400 hover:text-white`,children:e.jsx(se,{size:18})}),e.jsx(I,{size:"2xl",isOpen:o,onOpenChange:h,className:"border dark text-foreground border-default-400",children:e.jsx(A,{children:m=>{var g,V,$,q,F;return e.jsxs(e.Fragment,{children:[e.jsx(O,{className:"flex flex-col gap-1 uppercase",children:"‚ö†Ô∏è Advertencia"}),e.jsxs(U,{children:[e.jsx("p",{children:"Esta acci√≥n es permanente y no se puede deshacer."}),e.jsxs("form",{className:"flex flex-col items-center justify-center gap-3 ",children:[e.jsx(f,{label:"Email",id:"mail",isRequired:!0,type:"email",size:"lg",placeholder:"ejemplo",variant:"underlined",color:"default",isInvalid:!1,errorMessage:(g=j.mail)==null?void 0:g.message,...p("mail")}),e.jsxs("div",{className:"flex flex-col w-full gap-4 md:flex-row",children:[e.jsx(f,{type:"text",id:"first_name",isRequired:!0,size:"lg",label:"Nombre",variant:"underlined",placeholder:"Juan",className:"max-w-xs",color:"default",isInvalid:!1,errorMessage:(V=j.first_name)==null?void 0:V.message,...p("first_name")}),e.jsx(f,{type:"text",id:"last_name",isRequired:!0,size:"lg",label:"Apellido",variant:"underlined",placeholder:"Perez",className:"max-w-xs",color:"default",isInvalid:!1,errorMessage:($=j.last_name)==null?void 0:$.message,...p("last_name")})]}),e.jsxs("div",{className:"flex flex-col order-3 w-full gap-4 md:flex-row",children:[e.jsx(f,{label:"Contrase√±a",id:"password",isRequired:!0,size:"lg",variant:"underlined",placeholder:"Ingrese su contrase√±a",color:"default",isInvalid:!1,errorMessage:(q=j.password)==null?void 0:q.message,endContent:e.jsx("button",{className:"focus:outline-none",type:"button",onClick:v,children:r?e.jsx(z,{size:22,className:"text-2xl pointer-events-none text-default-400"}):e.jsx(P,{size:22,className:"text-2xl pointer-events-none text-default-400"})}),type:r?"text":"password",className:"max-w-xs ",...p("password")}),e.jsx(f,{label:"Repetir contrase√±a",id:"confirmPassword",isRequired:!0,size:"lg",variant:"underlined",placeholder:"Repita su contrase√±a",color:"default",isInvalid:!1,errorMessage:(F=j.confirmPassword)==null?void 0:F.message,endContent:e.jsx("button",{className:"focus:outline-none",type:"button",onClick:_,children:y?e.jsx(z,{size:22,className:"text-2xl pointer-events-none text-default-400"}):e.jsx(P,{size:22,className:"text-2xl pointer-events-none text-default-400"})}),type:y?"text":"password",className:"max-w-xs",...p("confirmPassword")})]}),e.jsxs("div",{className:"flex flex-col order-first w-full gap-4 md:flex-row",children:[e.jsx(Z,{register:p,setIsManagerSelected:b}),e.jsx(G,{register:p})]})]})]}),e.jsx(J,{children:e.jsx(N,{variant:"solid",radius:"sm",className:"font-semibold uppercase bg-primary/60 hover:bg-primary",onPress:()=>{C(E)(),m()},children:"Editar"})})]})}})})]})}const xe=[{label:"nombre",key:"name"},{label:"funci√≥n",key:"role"},{label:"country",key:"country"},{label:"email",key:"mail"},{label:"acciones",key:"actions"}],T={docs:[],totalDocs:0,limit:10,totalPages:0,page:0,pagingCounter:0,hasPrevPage:!1,hasNextPage:!1,prevPage:null,nextPage:null},ge=function(){const{refresh:t,isHiddenTopBar:u}=R(),[a,n]=i.useState(T),[o,x]=i.useState({category_id:{name:""}}),[h,r]=i.useState(!0),[c,y]=i.useState(1);return i.useEffect(()=>{n(T),(async()=>{const d=await Q(c,o);if(console.log(d),d.ok){const b=await d.json();n(b.response)}r(!1)})()},[c,o,t]),e.jsxs("section",{className:` ${u?"pt-12":"pt-36"} absolute top-0 left-0 w-full pl-5 lg:pl-[200px] pb-16 lg:pt-20 pr-5 overflow-y-scroll h-screen bg-black`,children:[e.jsxs("div",{className:"flex flex-wrap items-start justify-between w-full gap-4 pb-4 ",children:[e.jsx(me,{}),e.jsx(ee,{setQueries:x,queries:o,countriesFilter:!0})]}),e.jsxs("div",{className:"flex items-center justify-between px-3",children:[e.jsxs("p",{className:"mb-2 text-default-400 text-small",children:["Total ",a.totalDocs," usuarios"]}),e.jsxs("p",{className:"mb-2 text-default-400 text-small",children:["P√°gina ",a.page]})]}),e.jsxs(ae,{"aria-label":"Users Table",bottomContent:a.page>0?e.jsx("div",{className:`${a.docs?"opacity-100":"opacity-0"} flex items-center justify-center w-full gap-4`,children:e.jsx(ie,{isCompact:!0,showControls:!0,showShadow:!0,color:"primary",page:a.page,total:a.totalPages,onChange:s=>{r(!0),y(s)}})}):null,children:[e.jsx(re,{columns:xe,children:s=>e.jsx(te,{className:"uppercase",allowsSorting:s.key!=="country"&&s.key!=="actions",children:s.label},s.key)}),e.jsx(le,{emptyContent:h?" ":a.docs.length===0?"No se encontraron usuarios":"",items:a.docs,isLoading:h,loadingContent:e.jsx(B,{className:"mt-12",label:"Loading..."}),children:s=>e.jsx(oe,{children:d=>{var b;return e.jsx(ne,{children:d==="name"?e.jsx(H,{avatarProps:{size:"sm",className:"p-2",radius:"sm",src:s.role==="ADMIN"?"/admin.svg":s.role==="MANAGER"?"/manager.svg":"/arbitro.svg"},name:`${s.last_name} ${s.first_name}`}):d==="role"?e.jsx("p",{className:"capitalize",children:s.role==="JUEZ"?"√Årbitro":s.role==="MANAGER"?"Coordinador":s.role.toLowerCase()}):d==="actions"?e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(fe,{id:s._id,role:s.role,name:`${s.first_name} ${s.last_name}`}),e.jsx(pe,{id:s._id,role:s.role,name:`${s.first_name} ${s.last_name}`})]}):d==="country"?e.jsx("p",{children:(b=s.country_id)!=null&&b.name?s.country_id.name.toLowerCase():"-"}):ce(s,d)})}},s._id)})]})]})},qe=ge;export{qe as default};
