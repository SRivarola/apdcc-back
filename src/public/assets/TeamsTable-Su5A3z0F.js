import{r as u,j as e,k as q,n as P,f as y,b as h,A as N,u as _,m as w,a as v,S as T,s as z,L as R,o as D}from"./index-JWa7NUy4.js";import{F as $}from"./Filters-EQgLdBPe.js";import{u as S}from"./index.esm-9JSLITrw.js";import{s as j,l as f}from"./chunk-ZFWMN6TD-BHfSbi5G.js";import{i as b}from"./chunk-TC4QW7OA-PKl5rGY4.js";import{m as C}from"./chunk-3S23ARPO-FL__dOlG.js";import{m as E}from"./chunk-EPDLEVDR-KAnzZ6kv.js";import{T as M}from"./trash-2-FUpp19p7.js";import{c as A}from"./chunk-OFH6WYRQ-3JrIrGAG.js";import{m as k,P as L}from"./pen-square-wP5Kru1g.js";import{t as V,a as I,b as H,c as Y,d as U,e as B}from"./chunk-YRZGWF2W-MIuIXr1C.js";import{p as J}from"./chunk-BIN3WWJN-S_tf1g1q.js";import{g as G}from"./chunk-KARN4QIT-1QmJr7SI.js";import"./search-PpWDTfv_.js";import"./chunk-MA2FG3JE-wFWOOmSP.js";import"./chunk-AMSULWPV-bKYtaC25.js";import"./import-mnVAr31n.js";import"./import-9CNbtmp6.js";import"./chunk-7F3ZLNJ6-8_TgjuV-.js";import"./chunk-M3MASYO7-HiqdPVRD.js";function K({register:c}){const[r,o]=u.useState([]);return u.useEffect(()=>{(async()=>{const n=await q();if(n.ok){const t=await n.json();o(t.response)}})()},[]),e.jsx(j,{className:"max-w-xs",label:"Country",isRequired:!0,size:"sm",variant:"underlined",color:"default",...c("country_id"),children:r.map(a=>e.jsx(f,{variant:"flat",className:"uppercase",children:a.name},a._id))})}function Q({register:c}){const[r,o]=u.useState([]);return u.useEffect(()=>{(async()=>{const n=await P();if(n.ok){const t=await n.json();o(t.response)}})()},[]),e.jsx(j,{className:"max-w-xs",label:"Categoria",size:"sm",isRequired:!0,variant:"underlined",color:"default",...c("category_id"),children:r.map(a=>e.jsx(f,{variant:"flat",className:"uppercase",children:a.name},a._id))})}function W({onClose:c}){const{setRefresh:r,adminRole:o}=y(),[a,n]=u.useState(""),{register:t,handleSubmit:l,reset:p}=S({defaultValues:{name:"",sport:"",genre:"",country_id:"",category_id:""}}),i=async x=>{N.promise(async()=>{try{if((await fetch("https://apdcc-back-production.up.railway.app/api/teams/create",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(x)})).ok)return p(),r(),"¡Creación Exitosa! 😄";throw new Error("Oops, algo salió mal en el creación. 😕")}catch(d){throw new Error(d)}finally{c()}},{loading:"Loading...",success:d=>d,error:d=>d.message})};return e.jsxs("form",{onSubmit:l(i),children:[e.jsx(b,{label:"Nombre",id:"name",isRequired:!0,type:"text",size:"sm",variant:"underlined",color:"default",className:`${o!=="ADMIN"&&"hidden"}`,errorMessage:"",...t("name")}),e.jsxs("div",{className:"flex items-end gap-4",children:[o==="ADMIN"?e.jsx(K,{register:t}):e.jsx(b,{id:"name",label:"Nombre",placeholder:"Super Campeones FC",isRequired:!0,type:"text",size:"sm",variant:"underlined",color:"default",errorMessage:"",...t("name")}),e.jsxs(j,{className:"max-w-xs",label:"Deporte",isRequired:!0,size:"sm",variant:"underlined",color:"default",...t("sport"),children:[e.jsx(f,{textValue:"futbol7",variant:"flat",className:"uppercase",onClick:()=>n("F7"),children:"Futbol 7"},"F7"),e.jsx(f,{textValue:"futbol11",variant:"flat",className:"uppercase",onClick:()=>n("F11"),children:"Futbol 11"},"F11"),e.jsx(f,{textValue:"hockey",variant:"flat",className:"uppercase",onClick:()=>n("HOCKEY"),children:"Hockey"},"HOCKEY")]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(Q,{register:t}),e.jsxs(j,{className:"max-w-xs",label:"Genero",size:"sm",isRequired:!0,variant:"underlined",color:"default",...t("genre"),children:[a==="F7"||a==="HOCKEY"?e.jsx(f,{variant:"flat",className:"uppercase",children:"Femenino"},"FEMENINO"):null,a==="HOCKEY"?null:e.jsx(f,{variant:"flat",className:"uppercase",children:"Masculino"},"MASCULINO")]})]}),e.jsx(h,{type:"submit",className:"order-last w-full mt-5 uppercase font-semibold bg-primary/60 hover:bg-primary",variant:"solid",radius:"sm",children:"Registrar"})]})}function X(){const{isOpen:c,onOpen:r,onOpenChange:o}=_();return e.jsxs(e.Fragment,{children:[e.jsx(h,{onPress:r,variant:"faded",color:"default",className:"mb-3",radius:"sm",children:"Nuevo Equipo"}),e.jsx(w,{isOpen:c,onOpenChange:o,size:"lg",backdrop:"blur",className:"border dark text-foreground border-default-400",children:e.jsx(v,{children:a=>e.jsxs(e.Fragment,{children:[e.jsxs(C,{className:"flex items-start gap-1",children:[e.jsx(T,{size:22}),"Registrar nuevo equipo"]}),e.jsx(E,{className:"pb-10",children:e.jsx(W,{onClose:a})})]})})})]})}function Z({id:c,name:r,sport:o}){const{setRefresh:a}=y(),{isOpen:n,onOpen:t,onOpenChange:l}=_(),p=async()=>{N.promise(async()=>{try{if((await fetch(`https://apdcc-back-production.up.railway.app/api/teams/${c}`,{method:"DELETE",credentials:"include"})).ok)return a(),"¡Equipo eliminado/a con éxito! 😄";throw new Error("Oops, algo salió mal 😕")}catch(i){throw new Error("Error al procesar la solicitud: "+i.message)}},{loading:"Loading...",success:i=>i,error:i=>i.message})};return e.jsxs(e.Fragment,{children:[e.jsx(h,{isIconOnly:!0,onPress:t,color:"danger",size:"sm",className:"transition-all bg-danger/40 hover:bg-danger duration-350",children:e.jsx(M,{size:18})}),e.jsx(w,{size:"xl",isOpen:n,onOpenChange:l,className:"border dark text-foreground border-default-400",children:e.jsx(v,{children:i=>e.jsxs(e.Fragment,{children:[e.jsx(C,{className:"flex flex-col gap-1 uppercase",children:"⚠️ Advertencia"}),e.jsx(E,{children:e.jsxs("div",{children:["Está a punto de eliminar al equipo de ",e.jsx("b",{children:o})," ",e.jsx(A,{radius:"sm",className:"capitalize",children:r}),e.jsx("br",{}),"Esta acción es permanente y no se puede deshacer.",e.jsx("br",{})," ¿Está seguro de que desea continuar?"]})}),e.jsx(k,{children:e.jsx(h,{className:"font-semibold uppercase rounded-md bg-danger/50 hover:bg-danger",onPress:()=>{p(),i()},children:"Eliminar"})})]})})})]})}function ee({id:c,role:r,name:o,state:a}){const{isOpen:n,onOpen:t,onOpenChange:l}=_(),{setRefresh:p}=y(),{register:i,handleSubmit:x}=S({defaultValues:{name:""}}),d=async g=>{N.promise(async()=>{try{if((await fetch(`https://apdcc-back-production.up.railway.app/api/teams/${c}`,{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(g)})).ok)return p(),"Equipo editado con éxito! 😄";throw new Error("Oops, algo salió mal 😕")}catch(s){throw new Error("Error al procesar la solicitud: "+s.message)}},{loading:"Loading...",success:s=>s,error:s=>s.message})};return e.jsxs(e.Fragment,{children:[e.jsx(h,{isIconOnly:!0,onPress:t,color:"default",size:"sm",className:`${a==="READY"?"opacity-0 cursor-default pointer-events-none":"opacity-100"} bg-default/50 text-default-400 hover:text-white`,children:e.jsx(L,{size:18})}),e.jsx(w,{isOpen:n,onOpenChange:l,className:"border dark text-foreground border-default-400",children:e.jsx(v,{children:g=>e.jsxs(e.Fragment,{children:[e.jsx(C,{className:"flex flex-col gap-1 uppercase",children:"⚠️ Advertencia"}),e.jsxs(E,{children:[e.jsx("p",{children:"Esta acción es permanente y no se puede deshacer."}),e.jsx(b,{placeholder:"Nuevo nombre",label:"Nombre",isRequired:!0,variant:"underlined",...i("name")})]}),e.jsx(k,{children:e.jsx(h,{variant:"solid",radius:"sm",className:"font-semibold uppercase bg-primary/60 hover:bg-primary",onPress:()=>{x(d)(),g()},children:"editar"})})]})})})]})}function se(){const{isOpen:c,onOpen:r,onOpenChange:o}=_(),[a,n]=u.useState(""),t=async()=>{N.promise(async()=>{try{if((await fetch("https://apdcc-back-production.up.railway.app/api/players/cleanallteams",{method:"PUT"})).ok)return"Equipos vaciados correctamente ♻️"}catch(l){throw new Error("Error al procesar la solicitud: "+l.message)}},{loading:"Loading...",success:l=>l,error:l=>l.message})};return e.jsxs(e.Fragment,{children:[e.jsx(h,{onPress:r,color:"danger",className:"block mt-5 font-semibold uppercase rounded-md ms-auto ",children:"Vaciar equipos"}),e.jsx(w,{isOpen:c,onOpenChange:o,hideCloseButton:!0,className:"border dark text-foreground border-default-400",children:e.jsx(v,{children:l=>e.jsxs(e.Fragment,{children:[e.jsx(C,{className:"flex flex-col gap-1 uppercase",children:"⚠️ Warning"}),e.jsxs(E,{children:[e.jsx("div",{children:"Esta acción es permanente y no se puede deshacer. Estás seguro de que quieres continuar?"}),e.jsxs("label",{children:["Ingresá ",e.jsx("span",{className:"font-medium text-danger",children:"vaciarequipos"})," para confirmar.",e.jsx(b,{size:"sm",variant:"faded",name:"key",value:a.toLowerCase(),onValueChange:p=>n(p.toLowerCase())})]})]}),e.jsx(k,{children:e.jsx(h,{isDisabled:a!=="vaciarequipos",color:"primary",className:"w-full font-semibold rounded-md",onPress:()=>{t(),l()},children:"Delete"})})]})})})]})}const ae=[{label:"nombre",key:"name"},{label:"deporte",key:"sport"},{label:"genero",key:"genre"},{label:"country",key:"country_id"},{label:"categoria",key:"category_id"},{label:"acciones",key:"actions"}],F={docs:[],totalDocs:0,limit:10,totalPages:0,page:0,pagingCounter:0,hasPrevPage:!1,hasNextPage:!1,prevPage:null,nextPage:null},re=function(){const[r,o]=u.useState(F),[a,n]=u.useState({country_id:"",genre:"",sport:"",category_id:""}),{refresh:t,isHiddenTopBar:l,adminRole:p}=y(),[i,x]=u.useState(!0),[d,g]=u.useState(1);return u.useEffect(()=>{o(F),(async()=>{const m=await D(d,a);if(m.ok){const{response:O}=await m.json();o(O)}x(!1)})()},[t,a,d]),e.jsxs("section",{className:` ${l?"pt-12":"pt-36"} absolute top-0 left-0 w-full pl-5 lg:pl-[200px] pb-16 lg:pt-20 pr-5 overflow-y-scroll h-screen bg-black`,children:[e.jsxs("div",{className:"flex flex-wrap items-start justify-between w-full gap-4 pb-4 ",children:[e.jsx(X,{}),e.jsx($,{setQueries:n,queries:a,countriesFilter:!0,genresFilter:!0,sportsFilter:!0,categoriesFilter:!0})]}),e.jsxs("div",{className:"flex items-center justify-between px-3",children:[e.jsxs("p",{className:"mb-2 text-default-400 text-small",children:["Total ",r.totalDocs," equipos"]}),e.jsxs("p",{className:"mb-2 text-default-400 text-small",children:["Página ",r.page]})]}),e.jsxs(V,{"aria-label":"Users Table",bottomContent:r.page>0?e.jsx("div",{className:`${r.docs?"opacity-100":"opacity-0"} flex items-center justify-center w-full gap-4`,children:e.jsx(J,{isCompact:!0,showControls:!0,showShadow:!0,color:"primary",page:r.page,total:r.totalPages,onChange:s=>{x(!0),g(s)}})}):null,children:[e.jsx(I,{columns:ae,children:s=>e.jsx(H,{className:"uppercase",children:s.label},s.key)}),e.jsx(Y,{emptyContent:i?" ":r.docs.length===0?"No se encontraron equipos":"",items:r==null?void 0:r.docs,isLoading:i,loadingContent:e.jsx(z,{className:"mt-12",label:"Loading..."}),children:s=>e.jsx(U,{children:m=>e.jsx(B,{className:"capitalize",children:m==="country_id"?e.jsx("p",{children:s.country_id.name}):m==="name"?e.jsx(R,{to:`/dashboard/teams/team/${s._id}`,children:s.name}):m==="category_id"?e.jsx("p",{children:s.category_id.name}):m==="actions"?e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ee,{id:s._id,role:s.role,name:`${s.first_name} ${s.last_name}`}),e.jsx(Z,{id:s._id,name:s.name,sport:s.sport})]}):G(s,m)})},s._id)})]}),p==="ADMIN"?e.jsx(se,{}):null]})},ve=re;export{ve as default};
