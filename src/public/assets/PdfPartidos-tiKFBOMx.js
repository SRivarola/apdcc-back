import{r as i,j as t,v as h,s as x,h as _}from"./index-YN4tTNn8.js";import{N as g}from"./NavbarPdf-CWuuhO8z.js";import{h as y}from"./moment-WSJ9un1t.js";import{I as j}from"./InputDate-g_vcsfQ7.js";import{D as w}from"./DownloadFixturePDF-BtOOta7G.js";import{t as b,a as P,b as v,c as D,d as N,e as C}from"./chunk-YRZGWF2W-IEG_nyza.js";import{p as E}from"./chunk-BIN3WWJN-_GbYyHJq.js";import"./chunk-TC4QW7OA-oZWt8Hlj.js";import"./import-Ui63LOmK.js";import"./import-7deDF0Ha.js";import"./chunk-M3MASYO7-iCBu0L-F.js";import"./react-pdf.browser--bhULds3.js";import"./objectWithoutPropertiesLoose-pdUxmcoj.js";import"./_commonjs-dynamic-modules-h-SxKiO4.js";import"./LOGO-NEGRO-HORIZONTAL-msT39if3.js";import"./chunk-MPX6TMFQ-GmfGW2RN.js";import"./chunk-MA2FG3JE-EcGkq75H.js";import"./chunk-AMSULWPV-B-yiDoeo.js";import"./chunk-7F3ZLNJ6-CkyJjYDz.js";import"./index-taukuCH3.js";const S=({match:a})=>{const[s,c]=i.useState();async function e(o){const n=await h(`?team=${o}&state=READY`);if(n.ok){const{response:p}=await n.json();return p}else throw new Error("Something went wrong")}const l=async()=>{try{const[o,n]=await Promise.all([e(a.local.team_id._id),e(a.visit.team_id._id)]),p=o.sort((r,d)=>r.last_name[0].localeCompare(d.last_name[0])),m=n.sort((r,d)=>r.last_name[0].localeCompare(d.last_name[0]));c(r=>({...r,localPlayers:p,visitPlayers:m}))}catch(o){console.error("Error fetching players",o)}};return i.useEffect(()=>{l()},[a]),t.jsx("div",{className:"flex",children:t.jsx(w,{match:a,players:s})})},k=[{label:"Torneo",key:"tournament_id"},{label:"local",key:"local"},{label:"visitante",key:"visit"},{label:"PDF",key:"pdf"}],I=({data:a,isFetching:s,setCurrentPage:c})=>t.jsxs(b,{isStriped:!0,"aria-label":"Tournament Table",className:"shadow-lg shadow-white/10 rounded-xl",bottomContent:a.page>0?t.jsx("div",{className:`${a.docs?"opacity-100":"opacity-0"} flex items-center justify-center w-full gap-4`,children:t.jsx(E,{isCompact:!0,showControls:!0,showShadow:!0,color:"primary",page:a.page,total:a.totalPages,onChange:e=>{c(e)}})}):null,children:[t.jsx(P,{columns:k,children:e=>t.jsx(v,{className:"uppercase",children:e.label},e.key)}),t.jsx(D,{emptyContent:s?" ":a.docs.length===0?"No se encontraron partidos":"",items:s?[]:a.docs.filter(e=>e.local&&e.local.team_id&&e.visit&&e.visit.team_id),isLoading:s,loadingContent:t.jsx(x,{label:"Loading..."}),children:e=>!e.visit||!e.local||e.visit.team_id.name==="LIBRE"||e.local.team_id.name==="LIBRE"?null:t.jsx(N,{children:l=>t.jsx(C,{className:"capitalize text-white",children:l==="tournament_id"?t.jsx("p",{children:e.tournament_id.name||""}):l==="local"?t.jsx("p",{children:e.local.team_id.name||""}):l==="visit"?t.jsx("p",{children:e.visit.team_id.name||""}):l==="pdf"?t.jsx(S,{match:e}):null})},e._id)})]}),X=()=>{const{isHiddenTopBar:a}=_(),[s,c]=i.useState(y(new Date).format("YYYY-MM-DD")),[e,l]=i.useState(null),[o,n]=i.useState(1),[p,m]=i.useState(!0),r=async d=>{try{m(!0);const u=await fetch(`https://apdcc.com.ar/api/matches/paginate?date=${d}&page=${o}`);if(u.ok){const{response:f}=await u.json();l(f)}}catch(u){console.log(u)}finally{m(!1)}};return i.useEffect(()=>{s&&r(s)},[s,o]),t.jsxs("section",{className:`${a?"pt-12":"pt-36"} absolute top-0 left-0 w-full pl-5 lg:pl-[200px] pb-16  lg:pt-20 pr-5 overflow-y-scroll bg-black`,children:[t.jsx(g,{}),t.jsxs("div",{className:"w-full h-full flex flex-col text-default-300 items-center gap-5 pt-2",children:[t.jsx(j,{date:s,setDate:c}),e?t.jsx(I,{data:e,isFetching:p,setCurrentPage:n}):null]})]})};export{X as default};
