import{r as l,j as e,b as V,A as S}from"./index-vn-uB_PF.js";import{u as E}from"./index.esm-5u3PaSbg.js";import{z as a,t as L}from"./index-VQZZm2e4.js";import{E as d,a as c}from"./eye-m7Xn_H6i.js";import{i as m}from"./chunk-TC4QW7OA-bpo2Wx46.js";import"./import-oUm0S_O9.js";import"./import-U70j1u4L.js";import"./chunk-M3MASYO7-FEWdLeLD.js";const k=a.object({oldPassword:a.string().min(8,{message:"La contrase√±a debe tener al menos 8 caracteres"}),newPassword:a.string().min(8,{message:"La contrase√±a debe tener al menos 8 caracteres"}),confirmPassword:a.string().min(8,{message:"La contrase√±a debe tener al menos 8 caracteres"})}).refine(s=>s.newPassword===s.confirmPassword,{message:"Las contrase√±as no coinciden",path:["confirmPassword"]}).refine(s=>s.newPassword!==s.oldPassword,{message:"La nueva contrase√±a debe ser diferente a la anterior",path:["newPassword"]});function _(){var u,x,f;const[s,p]=l.useState(!1),[o,w]=l.useState(!1),[r,b]=l.useState(!1),g=()=>p(!s),h=()=>w(!o),P=()=>b(!r),{register:n,handleSubmit:j,formState:{errors:i},reset:y}=E({defaultValues:{oldPassword:"",newPassword:"",confirmPassword:""},resolver:L(k)}),C=async N=>{const{oldPassword:v,newPassword:z}=N;S.promise(async()=>{try{const t=await fetch("https://apdcc-back-production.up.railway.app/api/auth/pass",{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:v,newPass:z})});if(console.log(t),t.ok)return y(),"¬°Contrase√±a cambiada con √©xito! üòÑ";throw new Error("Oops, algo sali√≥ mal en el cambio de contrase√±a. üòï")}catch(t){throw console.log(t),t}},{loading:"Loading...",success:t=>t,error:t=>t.message})};return e.jsx("section",{className:"flex items-center justify-center h-screen",children:e.jsxs("div",{className:"flex flex-col items-center justify-center max-w-xs p-10 m-auto rounded-xl xl:max-w-lg bg-white/10",children:[e.jsx("h1",{className:"pb-5 text-xl font-medium text-center md:text-2xl",children:"Cambiar Contrase√±a"}),e.jsxs("form",{onSubmit:j(C),children:[e.jsx(m,{type:s?"text":"password",id:"oldPassword",isRequired:!0,size:"lg",label:"Antigua Contrase√±a",variant:"underlined",placeholder:"pepe123",color:"default",endContent:e.jsx("button",{className:"focus:outline-none",type:"button",onClick:g,children:s?e.jsx(d,{size:22,className:"text-2xl pointer-events-none text-default-400"}):e.jsx(c,{size:22,className:"text-2xl pointer-events-none text-default-400"})}),errorMessage:(u=i.oldPassword)==null?void 0:u.message,...n("oldPassword")}),e.jsx(m,{type:o?"text":"password",id:"newPassword",isRequired:!0,size:"lg",label:"Nueva Contrase√±a",variant:"underlined",placeholder:"juarez123",color:"default",endContent:e.jsx("button",{className:"focus:outline-none",type:"button",onClick:h,children:o?e.jsx(d,{size:22,className:"text-2xl pointer-events-none text-default-400"}):e.jsx(c,{size:22,className:"text-2xl pointer-events-none text-default-400"})}),errorMessage:(x=i.newPassword)==null?void 0:x.message,...n("newPassword")}),e.jsx(m,{type:r?"text":"password",id:"confirmPassword",isRequired:!0,size:"lg",label:"Confirmar Contrase√±a",variant:"underlined",placeholder:"juarez123",color:"default",endContent:e.jsx("button",{className:"focus:outline-none",type:"button",onClick:P,children:r?e.jsx(d,{size:22,className:"text-2xl pointer-events-none text-default-400"}):e.jsx(c,{size:22,className:"text-2xl pointer-events-none text-default-400"})}),errorMessage:(f=i.confirmPassword)==null?void 0:f.message,...n("confirmPassword")}),e.jsx(V,{type:"submit",radius:"sm",className:"w-full mt-2",variant:"solid",color:"default",children:"Cambiar"})]})]})})}export{_ as default};
