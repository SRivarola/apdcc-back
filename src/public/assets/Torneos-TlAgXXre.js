import{e as q,f as k,r,j as e,s as N,u as T,b as F,m as E,a as v,g as G,i as U}from"./index-WqbPWE0E.js";import{F as C}from"./Fixture-sLy0_wIp.js";import{t as $,a as I,b as M,c as A,d as P,e as S}from"./chunk-YRZGWF2W-hcMjxO4J.js";import{g as z}from"./chunk-KARN4QIT-0lg9pr17.js";import{E as O}from"./external-link-DhkPCdgN.js";import{m as L}from"./chunk-EPDLEVDR-54dcRee3.js";import{m as W}from"./chunk-3S23ARPO-eiL4WC3X.js";import{m as Y}from"./chunk-QY5NICTW-_zE6iGR2.js";import{p as D}from"./chunk-BIN3WWJN-MMgnA3-P.js";import"./moment-WSJ9un1t.js";import"./pen-square-aFwKzsj7.js";import"./chunk-TC4QW7OA-v-iVWaFn.js";import"./import-yG13OaeA.js";import"./import-hIBVkbdo.js";import"./chunk-M3MASYO7-kWQ4oELG.js";import"./chunk-K3TANQWH-pElV0bqR.js";import"./chunk-ZFWMN6TD-2mDsgrVL.js";import"./chunk-7F3ZLNJ6-12qWG1A4.js";import"./chunk-OFH6WYRQ-oWe43lFJ.js";import"./chunk-AMSULWPV-a7khhzyU.js";/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J=q("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);function R({id:c,isClient:g}){const m=[{label:"Equipo",key:"team_id"},{label:"PJ",key:"played_matches"},{label:"PG",key:"wins"},{label:"PP",key:"losses"},{label:"PE",key:"ties"},{label:"ðŸŸ¨",key:"yellow_card"},{label:"ðŸŸ¥",key:"red_card"},{label:"Pts",key:"points"}],{refresh:o}=k(),[i,h]=r.useState(!0),[d,_]=r.useState([]),[a,f]=r.useState(),[y,b]=r.useState([]);return r.useEffect(()=>{const t=localStorage.getItem("apdcc_token");(async()=>{try{const u=await fetch(`https://apdcc-back-production.up.railway.app/api/tournaments/tournament/${c}`,{headers:{token:t}});if(!u.ok){console.log("Algo salio mal en el fetch");return}const{response:p}=await u.json();f({category:p.category_id.name,day:p.day,name:p.name,sport:p.sport,time:p.time,teams_quantity:p.teams_quantity,createdAt:p.createdAt,updatedAt:p.updatedAt})}catch(u){throw new Error(u)}})()},[c,o]),r.useEffect(()=>{(async()=>{try{const s=await fetch(`https://apdcc-back-production.up.railway.app/api/matches/?tournament_id=${c}`);if(!s.ok){console.log("Algo salio mal en el fetch");return}const{response:u}=await s.json();b(u)}catch(s){console.log(s)}})()},[c,o]),r.useEffect(()=>{(async()=>{try{const s=await fetch(`https://apdcc-back-production.up.railway.app/api/targets/tournament/${c}`);if(!s.ok){console.log("Algo salio mal en el fetch");return}const{response:u}=await s.json(),B=Object.values(u.reduce((l,n)=>{const x=n.team_id._id;return l[x]||(l[x]=[]),l[x].push(n),l},{})).map(l=>l.reduce((n,x)=>(Object.keys(x).forEach(w=>{typeof x[w]=="number"&&(n[w]=(n[w]||0)+x[w])}),n.team_id=x.team_id,n),{})).sort((l,n)=>n.points!==l.points?n.points-l.points:l.red_card!==n.red_card?l.red_card-n.red_card:l.yellow_card-n.yellow_card);_(B)}catch(s){console.error(s)}finally{h(!1)}})()},[c,o]),e.jsxs("div",{children:[a?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"lg:px-3 mb-6 text-center",children:[e.jsx("h1",{className:"text-xl lg:text-3xl font-bold uppercase",children:a==null?void 0:a.name}),e.jsx("span",{className:"font-semibold uppercase text-default-400",children:`${a==null?void 0:a.sport} (${a==null?void 0:a.category}) / ${a.day} ${a==null?void 0:a.time}`})]}),e.jsx("div",{className:"flex items-center justify-between px-3",children:e.jsxs("p",{className:"mb-2 text-default-400 text-small",children:["Total ",a==null?void 0:a.teams_quantity," equipos"]})})]}):null,e.jsxs($,{"aria-label":"Users Table",children:[e.jsx(I,{columns:m,children:t=>e.jsx(M,{className:"uppercase",children:t.label},t.key)}),e.jsx(A,{emptyContent:i?" ":d.length===0?"No se encontraron torneos":"",items:i?[]:d,isLoading:i,loadingContent:e.jsx(N,{label:"Loading..."}),children:t=>e.jsx(P,{className:"justify-center",children:s=>e.jsx(S,{children:s==="team_id"?e.jsx("p",{children:t.team_id.name}):z(t,s)})},t.team_id._id)})]}),g?null:e.jsx(C,{matches:y,tournamentId:c})]})}function V({name:c,id:g,placement:m}){const{isOpen:o,onOpen:i,onOpenChange:h}=T();return e.jsxs(e.Fragment,{children:[e.jsx(F,{onPress:i,variant:"faded",color:"primary",size:"sm",radius:"sm",isIconOnly:!0,children:e.jsx(O,{size:16})}),e.jsx(E,{scrollBehavior:"inside",placement:m,size:"3xl",isOpen:o,onOpenChange:h,className:"w-full border dark text-foreground border-default-400",children:e.jsx(v,{children:()=>e.jsx(L,{className:"px-0",children:e.jsx(R,{id:g,isClient:!0})})})})]})}function Z({name:c,id:g,placement:m}){const[o,i]=r.useState([]);r.useEffect(()=>{(async()=>{try{const f=await fetch(`https://apdcc-back-production.up.railway.app/api/matches/?tournament_id=${g}`);if(!f.ok){console.log("Algo salio mal en el fetch");return}const{response:y}=await f.json();i(y)}catch(f){console.log(f)}})()},[g]);const{isOpen:h,onOpen:d,onOpenChange:_}=T();return e.jsxs(e.Fragment,{children:[e.jsx(F,{onPress:d,variant:"faded",color:"primary",size:"sm",radius:"sm",isIconOnly:!0,children:e.jsx(O,{size:16})}),e.jsx(E,{placement:m,scrollBehavior:"inside",size:"4xl",isOpen:h,onOpenChange:_,className:"w-full border dark text-foreground border-default-400",children:e.jsx(v,{children:()=>e.jsxs(e.Fragment,{children:[e.jsxs(W,{className:"flex flex-col gap-1",children:["Fixture de ",c]}),e.jsx(L,{children:o.length?e.jsx(C,{matches:o}):e.jsxs("div",{className:"flex items-start gap-2 text-warning",children:[e.jsx(J,{size:20}),"No hay fechas disponibles en este momento."]})}),e.jsx(Y,{})]})})})]})}const Q=[{label:"CategorÃ­a",key:"category"},{label:"Torneos",key:"tournament"},{label:"Fixture",key:"fixture"},{label:"Posiciones",key:"positions"}],X=function(){const m=G().pathname,o=m.startsWith("/hockey"),i=m.startsWith("/futbol/masculino"),h=m.startsWith("/futbol/femenino"),[d,_]=r.useState([]),[a,f]=r.useState(1);k();const[y,b]=r.useState(!0);return r.useEffect(()=>{(async()=>{try{const s=await fetch(`https://apdcc-back-production.up.railway.app/api/tournaments?page=${a}`);if(s.ok){const{response:u}=await s.json(),p=u.docs.filter(j=>o?j.sport==="HOCKEY":i?j.sport!=="HOCKEY"&&j.genre==="MASCULINO":h?j.sport!=="HOCKEY"&&j.genre==="FEMENINO":!1);_(p)}}catch(s){throw new Error(s)}finally{b(!1)}})()},[a,o,i,h]),r.useEffect(()=>{window.scrollTo(0,0)},[m]),e.jsxs("section",{className:"min-h-screen pt-20 bg-background dark text-foreground",children:[e.jsx("div",{className:"flex justify-center px-3 lg:px-0",children:e.jsx(U,{src:`${o?"https://res.cloudinary.com/dfnimrpzt/image/upload/v1705447091/photos/portada-hockey_v1buvo.png":i?"https://res.cloudinary.com/dfnimrpzt/image/upload/v1705447089/photos/portada-fut-masc_pf6pop.jpg":"https://res.cloudinary.com/dfnimrpzt/image/upload/v1705447090/photos/portada-fut-fem_hxyaym.jpg"}`,alt:"portada torneo",className:"h-[180px] md:h-[400px] object-cover "})}),e.jsxs("h1",{className:"pt-10 text-3xl font-medium text-center text-white",children:["Torneos de"," ",o?"Hockey":h?"FÃºtbol Femenino":"FÃºtbol Masculino"]}),e.jsx("h2",{className:"font-medium text-center text-warning",children:"Lorem ipsum dolor sit amet."}),e.jsx("div",{className:"py-10 mx-auto max-w-7xl",children:e.jsxs($,{isStriped:!0,"aria-label":"Users Table",className:"shadow-lg shadow-white/10",bottomContent:d.page>0?e.jsx("div",{className:`${d.docs?"opacity-100":"opacity-0"} flex items-center justify-center w-full gap-4`,children:e.jsx(D,{isCompact:!0,showControls:!0,showShadow:!0,color:"primary",page:d.page,total:d.totalPages,onChange:t=>{b(!0),f(t)}})}):null,children:[e.jsx(I,{columns:Q,children:t=>e.jsx(M,{className:"uppercase",children:t.label},t.key)}),e.jsx(A,{emptyContent:y?" ":d.length===0?"No se encontraron torneos":"",items:y?[]:d,isLoading:y,loadingContent:e.jsx(N,{label:"Loading..."}),children:t=>e.jsx(P,{children:s=>e.jsx(S,{className:"capitalize",children:s==="category"?e.jsx("p",{children:t.category_id.name}):s==="tournament"?e.jsx("p",{children:t.name}):s==="fixture"?e.jsx(Z,{placement:"center",name:t.name,id:t._id}):s==="positions"?e.jsx(V,{placement:"center",name:t.name,id:t._id}):z(t,s)})},t._id)})]})})]})},ye=X;export{ye as default};
