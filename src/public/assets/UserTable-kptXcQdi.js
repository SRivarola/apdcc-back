import{r as i,j as e,f as S,b as _,A as M,u as I,m as A,a as O,s as H,B as Q,a2 as Y}from"./index-tVULn6Jm.js";import{z as w,t as W}from"./index-Aldvp2fJ.js";import{i as m}from"./chunk-TC4QW7OA--pANOmQ7.js";import{u as L}from"./index.esm-goSeQxV8.js";import{s as J,l as P}from"./chunk-ZFWMN6TD-8CmY_HRS.js";import{E as R,a as k}from"./eye-3ljI6IfV.js";import{U as X}from"./user-jAXV_2Sa.js";import{m as q}from"./chunk-3S23ARPO-phkileI_.js";import{m as T}from"./chunk-EPDLEVDR-SsCmFmeF.js";import{T as K}from"./trash-2-Xrm-oyqh.js";import{c as ee}from"./chunk-OFH6WYRQ-GghTRkIL.js";import{m as G,P as se}from"./pen-square-clfrt9Ma.js";import{F as ae}from"./Filters-Yd77dbtw.js";import{t as re,a as te,b as le,c as oe,d as ne,e as ie}from"./chunk-YRZGWF2W-LkXEBSM1.js";import{p as ce}from"./chunk-BIN3WWJN-CAY3TSiq.js";import{g as de}from"./chunk-KARN4QIT-fGQrx1IB.js";import"./import-e5kjZA-s.js";import"./import-5PnlEYC_.js";import"./chunk-M3MASYO7-BVfBdtkk.js";import"./chunk-7F3ZLNJ6-y1NaYhLh.js";import"./search-s7sXKKM0.js";import"./chunk-MA2FG3JE-68nxviDb.js";import"./chunk-AMSULWPV-Llnb_6ge.js";const me=w.object({mail:w.string().email({message:"Por favor, ingresa una direcci√≥n de correo electr√≥nico v√°lida"}),phone:w.string().min(8,{message:"Por favor, ingresa un n√∫mero de telefono v√°lido"}),first_name:w.string().min(3,{message:"El nombre debe tener al menos 3 caracteres"}),last_name:w.string().min(3,{message:"El apellido debe tener al menos 3 caracteres"}),password:w.string().min(8,{message:"La contrase√±a debe contener al menos 8 caracteres"}),confirmPassword:w.string().min(8,{message:"La contrase√±a de confirmaci√≥n debe contener al menos 8 caracteres"}),role:w.string(),country_id:w.string().optional()}).refine(l=>l.confirmPassword===l.password,{message:"Las contrase√±as no coinciden",path:["confirmPassword"]});function B({register:l,isManagerSelected:t}){const[g,d]=i.useState([]);return i.useEffect(()=>{(async()=>{try{const o=await fetch("http://localhost:8080/api/countries/all");if(o.ok){const u=await o.json();d(u.response)}}catch(o){throw new Error(o)}})()},[]),e.jsx(J,{className:"max-w-xs dark text-foreground ",...t?{isRequired:!0}:{},label:"Countries",size:"sm",variant:"underlined",color:"default",...l("country_id"),children:g.map(a=>e.jsx(P,{variant:"flat",className:"uppercase",value:a._id,children:a.name},a._id))})}function Z({register:l,setIsManagerSelected:t}){return e.jsxs(J,{isRequired:!0,id:"role",label:"Rol",size:"sm",variant:"underlined",...l("role"),children:[e.jsx(P,{id:"ADMIN",startContent:e.jsx("img",{className:"w-6 h-6 p-1 uppercase bg-black rounded-full",src:"/admin.svg",alt:"icono de admin"}),className:"uppercase",onClick:()=>t(!1),children:"Admin"},"ADMIN"),e.jsx(P,{id:"MANAGER",startContent:e.jsx("img",{className:"w-6 h-6 p-1 uppercase bg-black rounded-full ",src:"/arbitro.svg",alt:"icono de admin"}),className:"uppercase",onClick:()=>t(!0),children:"Coordinador"},"MANAGER"),e.jsx(P,{id:"JUEZ",startContent:e.jsx("img",{className:"w-6 h-6 p-1 uppercase bg-black rounded-full",src:"/manager.svg",alt:"icono de admin"}),className:"uppercase",onClick:()=>t(!1),children:"√Årbitro"},"JUEZ")]})}function ue(){var b,C,f,E,j,z;const{setRefresh:l}=S(),[t,g]=i.useState(!1),[d,a]=i.useState(!1),[o,u]=i.useState(!1),y=()=>g(!t),r=()=>a(!d),{register:n,handleSubmit:v,formState:{errors:p},reset:s}=L({defaultValues:{mail:"",phone:0,first_name:"",last_name:"",password:"",confirmPassword:"",role:""},resolver:W(me)}),c=async N=>{const x={...N,phone:Number(N.phone)};M.promise(async()=>{try{if((await fetch("http://localhost:8080/api/auth/register",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(x)})).ok)return l(),s(),"¬°Registro Exitoso! üòÑ ¬°Bienvenid@!";throw new Error("Oops, algo sali√≥ mal en el registro. üòï")}catch(h){throw console.log(h),h}},{loading:"Loading...",success:h=>h,error:h=>h.message})};return e.jsxs("form",{className:"flex flex-col items-center justify-center gap-3 ",onSubmit:v(c),children:[e.jsxs("div",{className:"flex flex-col w-full gap-4 md:flex-row",children:[e.jsx(m,{label:"Email",id:"mail",isRequired:!0,type:"email",size:"lg",placeholder:"ejemplo",variant:"underlined",color:"default",isInvalid:!1,errorMessage:(b=p.mail)==null?void 0:b.message,...n("mail")}),e.jsx(m,{label:"Telefono",id:"phone",type:"number",size:"lg",placeholder:"1131474847",variant:"underlined",color:"default",isInvalid:!1,errorMessage:(C=p.phone)==null?void 0:C.message,...n("phone")})]}),e.jsxs("div",{className:"flex flex-col w-full gap-4 md:flex-row",children:[e.jsx(m,{type:"text",id:"first_name",isRequired:!0,size:"lg",label:"Nombre",variant:"underlined",placeholder:"Juan",className:"max-w-xs",color:"default",isInvalid:!1,errorMessage:(f=p.first_name)==null?void 0:f.message,...n("first_name")}),e.jsx(m,{type:"text",id:"last_name",isRequired:!0,size:"lg",label:"Apellido",variant:"underlined",placeholder:"Perez",className:"max-w-xs",color:"default",isInvalid:!1,errorMessage:(E=p.last_name)==null?void 0:E.message,...n("last_name")})]}),e.jsxs("div",{className:"flex flex-col order-3 w-full gap-4 md:flex-row",children:[e.jsx(m,{label:"Contrase√±a",id:"password",isRequired:!0,size:"lg",variant:"underlined",placeholder:"Ingrese su contrase√±a",color:"default",isInvalid:!1,errorMessage:(j=p.password)==null?void 0:j.message,endContent:e.jsx("button",{className:"focus:outline-none",type:"button",onClick:y,children:t?e.jsx(R,{size:22,className:"text-2xl pointer-events-none text-default-400"}):e.jsx(k,{size:22,className:"text-2xl pointer-events-none text-default-400"})}),type:t?"text":"password",className:"max-w-xs ",...n("password")}),e.jsx(m,{label:"Repetir contrase√±a",id:"confirmPassword",isRequired:!0,size:"lg",variant:"underlined",placeholder:"Repita su contrase√±a",color:"default",isInvalid:!1,errorMessage:(z=p.confirmPassword)==null?void 0:z.message,endContent:e.jsx("button",{className:"focus:outline-none",type:"button",onClick:r,children:d?e.jsx(R,{size:22,className:"text-2xl pointer-events-none text-default-400"}):e.jsx(k,{size:22,className:"text-2xl pointer-events-none text-default-400"})}),type:d?"text":"password",className:"max-w-xs",...n("confirmPassword")})]}),e.jsxs("div",{className:"flex flex-col order-first w-full gap-4 md:flex-row",children:[e.jsx(Z,{register:n,setIsManagerSelected:u}),o&&e.jsx(B,{register:n,isManagerSelected:o})]}),e.jsx(_,{type:"submit",className:"order-last w-full mt-2 font-semibold uppercase bg-primary/60 hover:bg-primary",variant:"solid",radius:"sm",children:"Registrar"})]})}function pe(){const{isOpen:l,onOpen:t,onOpenChange:g}=I();return e.jsxs(e.Fragment,{children:[e.jsx(_,{onPress:t,variant:"faded",color:"default",className:"mb-3",radius:"sm",children:"Nuevo Usuario"}),e.jsx(A,{isOpen:l,onOpenChange:g,size:"2xl",backdrop:"blur",className:"border dark text-foreground border-default-400",children:e.jsx(O,{children:d=>e.jsxs(e.Fragment,{children:[e.jsxs(q,{className:"flex items-start gap-1",children:[e.jsx(X,{size:22}),"Registrar nuevo usuario"]}),e.jsx(T,{className:"pb-10",children:e.jsx(ue,{})})]})})})]})}function fe({id:l,role:t,name:g}){const{setRefresh:d}=S(),{isOpen:a,onOpen:o,onOpenChange:u}=I(),y=async()=>{M.promise(async()=>{try{if((await fetch(`http://localhost:8080/api/auth/${l}`,{method:"DELETE",credentials:"include"})).ok)return d(),"¬°Usuario eliminado con √©xito! üòÑ";throw new Error("Oops, algo sali√≥ mal üòï")}catch(r){throw new Error("Error al procesar la solicitud: "+r.message)}},{loading:"Loading...",success:r=>r,error:r=>r.message})};return e.jsxs(e.Fragment,{children:[e.jsx(_,{isIconOnly:!0,onPress:o,color:"danger",size:"sm",className:"transition-all bg-danger/40 hover:bg-danger duration-350",children:e.jsx(K,{size:18})}),e.jsx(A,{size:"xl",isOpen:a,onOpenChange:u,className:"border dark text-foreground border-default-400",children:e.jsx(O,{children:r=>e.jsxs(e.Fragment,{children:[e.jsx(q,{className:"flex flex-col gap-1 uppercase",children:"‚ö†Ô∏è Advertencia"}),e.jsx(T,{children:e.jsxs("div",{children:["Est√° a punto de eliminar un ",e.jsx(ee,{children:t})," (",g,"). Esta acci√≥n es permanente y no se puede deshacer. ¬øEst√° seguro de que desea continuar?"]})}),e.jsx(G,{children:e.jsx(_,{className:"font-semibold uppercase rounded-md bg-danger/50 hover:bg-danger",onPress:()=>{y(),r()},children:"Eliminar"})})]})})})]})}function xe({id:l,role:t,name:g,state:d}){const{setRefresh:a}=S(),{isOpen:o,onOpen:u,onOpenChange:y}=I(),[r,n]=i.useState(!1),[v,p]=i.useState(!1),[s,c]=i.useState(!1),b=()=>n(!r),C=()=>p(!v),{register:f,handleSubmit:E,formState:{errors:j}}=L({defaultValues:{first_name:""}}),z=async N=>{M.promise(async()=>{try{if((await fetch(`http://localhost:8080/api/auth/${l}`,{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(N)})).ok)return a(),"¬°Usuario editado con √©xito! üòÑ";throw new Error("Oops, algo sali√≥ mal üòï")}catch(x){throw new Error("Error al procesar la solicitud: "+x.message)}},{loading:"Loading...",success:x=>x,error:x=>x.message})};return e.jsxs(e.Fragment,{children:[e.jsx(_,{isIconOnly:!0,onPress:u,color:"default",size:"sm",className:`${d==="READY"?"opacity-0 cursor-default pointer-events-none":"opacity-100"} bg-default/50 text-default-400 hover:text-white`,children:e.jsx(se,{size:18})}),e.jsx(A,{size:"2xl",isOpen:o,onOpenChange:y,className:"border dark text-foreground border-default-400",children:e.jsx(O,{children:N=>{var x,h,U,V,$,F;return e.jsxs(e.Fragment,{children:[e.jsx(q,{className:"flex flex-col gap-1 uppercase",children:"‚ö†Ô∏è Advertencia"}),e.jsxs(T,{children:[e.jsx("p",{children:"Esta acci√≥n es permanente y no se puede deshacer."}),e.jsxs("form",{className:"flex flex-col items-center justify-center gap-3 ",children:[e.jsxs("div",{className:"flex flex-col w-full gap-4 md:flex-row",children:[e.jsx(m,{label:"Email",id:"mail",isRequired:!0,type:"email",size:"lg",placeholder:"ejemplo",variant:"underlined",color:"default",isInvalid:!1,errorMessage:(x=j.mail)==null?void 0:x.message,...f("mail")}),e.jsx(m,{label:"Telefono",id:"phone",isRequired:!0,type:"number",size:"lg",placeholder:"1131474847",variant:"underlined",color:"default",isInvalid:!1,errorMessage:(h=j.phone)==null?void 0:h.message,...f("phone")})]}),e.jsxs("div",{className:"flex flex-col w-full gap-4 md:flex-row",children:[e.jsx(m,{type:"text",id:"first_name",isRequired:!0,size:"lg",label:"Nombre",variant:"underlined",placeholder:"Juan",className:"max-w-xs",color:"default",isInvalid:!1,errorMessage:(U=j.first_name)==null?void 0:U.message,...f("first_name")}),e.jsx(m,{type:"text",id:"last_name",isRequired:!0,size:"lg",label:"Apellido",variant:"underlined",placeholder:"Perez",className:"max-w-xs",color:"default",isInvalid:!1,errorMessage:(V=j.last_name)==null?void 0:V.message,...f("last_name")})]}),e.jsxs("div",{className:"flex flex-col order-3 w-full gap-4 md:flex-row",children:[e.jsx(m,{label:"Contrase√±a",id:"password",isRequired:!0,size:"lg",variant:"underlined",placeholder:"Ingrese su contrase√±a",color:"default",isInvalid:!1,errorMessage:($=j.password)==null?void 0:$.message,endContent:e.jsx("button",{className:"focus:outline-none",type:"button",onClick:b,children:r?e.jsx(R,{size:22,className:"text-2xl pointer-events-none text-default-400"}):e.jsx(k,{size:22,className:"text-2xl pointer-events-none text-default-400"})}),type:r?"text":"password",className:"max-w-xs ",...f("password")}),e.jsx(m,{label:"Repetir contrase√±a",id:"confirmPassword",isRequired:!0,size:"lg",variant:"underlined",placeholder:"Repita su contrase√±a",color:"default",isInvalid:!1,errorMessage:(F=j.confirmPassword)==null?void 0:F.message,endContent:e.jsx("button",{className:"focus:outline-none",type:"button",onClick:C,children:v?e.jsx(R,{size:22,className:"text-2xl pointer-events-none text-default-400"}):e.jsx(k,{size:22,className:"text-2xl pointer-events-none text-default-400"})}),type:v?"text":"password",className:"max-w-xs",...f("confirmPassword")})]}),e.jsxs("div",{className:"flex flex-col order-first w-full gap-4 md:flex-row",children:[e.jsx(Z,{register:f,setIsManagerSelected:c}),e.jsx(B,{register:f})]})]})]}),e.jsx(G,{children:e.jsx(_,{variant:"solid",radius:"sm",className:"font-semibold uppercase bg-primary/60 hover:bg-primary",onPress:()=>{E(z)(),N()},children:"Editar"})})]})}})})]})}const ge=[{label:"nombre",key:"name"},{label:"funci√≥n",key:"role"},{label:"country",key:"country"},{label:"telefono",key:"phone"},{label:"email",key:"mail"},{label:"acciones",key:"actions"}],D={docs:[],totalDocs:0,limit:10,totalPages:0,page:0,pagingCounter:0,hasPrevPage:!1,hasNextPage:!1,prevPage:null,nextPage:null},he=function(){const{refresh:t,isHiddenTopBar:g,setRefresh:d}=S(),[a,o]=i.useState(D),[u,y]=i.useState({category_id:{name:""}}),[r,n]=i.useState(!0),[v,p]=i.useState(1);return i.useEffect(()=>{o(D),(async()=>{const c=await Y(v,u);if(c.ok){const b=await c.json();o(b.response)}setTimeout(()=>{n(!1)},200)})()},[v,t]),i.useEffect(()=>{n(!0),p(1),d()},[u]),e.jsxs("section",{className:` ${g?"pt-12":"pt-36"} absolute top-0 left-0 w-full pl-5 lg:pl-[200px] pb-16 lg:pt-20 pr-5 overflow-y-scroll h-screen bg-black`,children:[e.jsxs("div",{className:"flex flex-wrap items-start justify-between w-full gap-4 pb-4 ",children:[e.jsx(pe,{}),e.jsx(ae,{setQueries:y,queries:u,countriesFilter:!0})]}),e.jsxs("div",{className:"flex items-center justify-between px-3",children:[e.jsxs("p",{className:"mb-2 text-default-400 text-small",children:["Total ",a.totalDocs," usuarios"]}),e.jsxs("p",{className:"mb-2 text-default-400 text-small",children:["P√°gina ",a.page]})]}),e.jsxs(re,{"aria-label":"Users Table",bottomContent:a.page>0?e.jsx("div",{className:`${a.docs?"opacity-100":"opacity-0"} flex items-center justify-center w-full gap-4`,children:e.jsx(ce,{isCompact:!0,showControls:!0,showShadow:!0,color:"primary",page:a.page,total:a.totalPages,onChange:s=>{n(!0),p(s)}})}):null,children:[e.jsx(te,{columns:ge,children:s=>e.jsx(le,{className:"uppercase",allowsSorting:s.key!=="country"&&s.key!=="actions",children:s.label},s.key)}),e.jsx(oe,{emptyContent:r?" ":a.docs.length===0?"No se encontraron usuarios":"",items:a.docs,isLoading:r,loadingContent:e.jsx(H,{className:"mt-12",label:"Loading..."}),children:s=>e.jsx(ne,{children:c=>{var b;return e.jsx(ie,{children:c==="name"?e.jsx(Q,{avatarProps:{size:"sm",className:"p-2",radius:"sm",src:s.role==="ADMIN"?"/admin.svg":s.role==="MANAGER"?"/manager.svg":"/arbitro.svg"},name:`${s.last_name} ${s.first_name}`}):c==="role"?e.jsx("p",{className:"capitalize",children:s.role==="JUEZ"?"√Årbitro":s.role==="MANAGER"?"Coordinador":s.role.toLowerCase()}):c==="actions"?e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(xe,{id:s._id,role:s.role,name:`${s.first_name} ${s.last_name}`}),e.jsx(fe,{id:s._id,role:s.role,name:`${s.first_name} ${s.last_name}`})]}):c==="country"?e.jsx("p",{children:(b=s.country_id)!=null&&b.name?s.country_id.name.toLowerCase():"-"}):c==="phone"?e.jsx("p",{children:s.phone?s.phone:"-"}):de(s,c)})}},s._id)})]})]})},Fe=he;export{Fe as default};
