import{e as j,h as y,r as m,U as N,f as v,j as e,b as E,A as k}from"./index-_S5NMAtM.js";import{z as a,t as S}from"./index-nA6RVQc-.js";import{i as d}from"./chunk-TC4QW7OA-f9E8bPCK.js";import{u as C}from"./index.esm-tGHRCW3I.js";import{U as L}from"./user-kqCuiKSi.js";import{E as z,a as U}from"./eye-cJ85NhUl.js";import"./import-KCSjf60V.js";import"./import-Ryse5qc9.js";import"./chunk-M3MASYO7-M1EEI2l4.js";/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A=j("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),I=a.object({mail:a.string().email({message:"Por favor, ingresa una direcci贸n de correo electr贸nico v谩lida"}),password:a.string().min(8,{message:"La contrase帽a debe contener al menos 8 caracteres"})}),M="https://apdcc-back-production.up.railway.app/api/auth/login";function F(){var n,l;const o=y(),[t,u]=m.useState(!1),{setAuthChange:p}=m.useContext(N),{setAdminRole:x}=v(),f=()=>u(!t),{register:r,handleSubmit:g,formState:{errors:i}}=C({defaultValues:{mail:"",password:""},resolver:S(I)}),h=async b=>{k.promise(async()=>{try{const s=await fetch(M,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(b)});if(s.ok){const c=await s.json();return x(c.user.role),p(w=>!w),c.user.role==="JUEZ"?o("/dashboard/judges"):o("/dashboard"),"隆Inicio de sesi贸n exitoso!  隆Bienvenid@!"}else throw new Error("Oops, algo sali贸 mal en el inicio de sesi贸n. ")}catch(s){throw console.log(s),s}},{loading:"Loading...",success:s=>s,error:s=>s.message})};return e.jsx("section",{className:"absolute w-screen h-screen top-0 left-0 flex items-center justify-center px-3 pb-3 bg-black",children:e.jsxs("div",{className:"max-w-xs p-10 m-auto rounded-xl xl:max-w-lg bg-white/10",children:[e.jsxs("h1",{className:"flex items-center justify-center gap-1 pb-2 text-2xl font-medium text-center md:text-4xl md:gap-2",children:[e.jsx(L,{className:"w-6 h-6 md:w-9 md:h-9"}),"Login"]}),e.jsxs("form",{className:"flex flex-col items-center justify-center gap-3 ",onSubmit:g(h),children:[e.jsx(d,{type:"email",id:"mail",isRequired:!0,size:"lg",label:"Email",variant:"underlined",placeholder:"ejemplo@ejemplo.com",className:"max-w-xs",color:"default",errorMessage:(n=i.mail)==null?void 0:n.message,endContent:e.jsx(A,{className:"text-default-400 ",size:22}),...r("mail")}),e.jsx(d,{label:"Password",id:"password",isRequired:!0,size:"lg",variant:"underlined",placeholder:"Enter your password",color:"default",errorMessage:(l=i.password)==null?void 0:l.message,endContent:e.jsx("button",{className:"focus:outline-none",type:"button",onClick:f,children:t?e.jsx(z,{size:22,className:"text-2xl pointer-events-none text-default-400"}):e.jsx(U,{size:22,className:"text-2xl pointer-events-none text-default-400"})}),type:t?"text":"password",className:"max-w-xs ",...r("password")}),e.jsx(E,{className:"w-full mt-2 uppercase font-semibold",type:"submit",variant:"solid",radius:"sm",color:"default",children:"Login"})]})]})})}export{F as default};
