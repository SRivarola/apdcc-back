import{e as $,r as d,j as e,g as b,k as H,l as E,b as f,A as T,u as w,m as _,a as k,S as U,s as S}from"./index-ud7WvSZc.js";import{F as Y}from"./Filters-684Sf98r.js";import{s as N,l as j}from"./chunk-ZFWMN6TD-xmq3Uv8t.js";import{m as v,t as P,a as O,b as z,c as q,d as M,e as I}from"./chunk-YRZGWF2W-zd0TKMqz.js";import{m as C}from"./chunk-EPDLEVDR-0vwhT5A0.js";import{T as G}from"./trash-2-0gwn8ZRO.js";import{c as R,g as A}from"./chunk-OFH6WYRQ-VrSlWUnV.js";import{m as D,P as V,p as J}from"./pen-square-MRu9I7uJ.js";import{E as Q}from"./external-link-JjNj9EIo.js";import"./search-2AweBpUQ.js";import"./chunk-AMSULWPV-YtnjV3Dt.js";/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B=$("UserMinus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W=$("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);function X({register:r}){const[l,i]=d.useState([]);return d.useEffect(()=>{(async()=>{const o=localStorage.getItem("apdcc_token");try{const n=await fetch("https://apdcc-back-production.up.railway.app/api/countries/all",{method:"GET",credentials:"include",headers:{token:o}});if(n.ok){const u=await n.json();i(u.response)}}catch(n){throw new Error(n)}})()},[]),e.jsx(N,{className:"max-w-xs",label:"Country",isRequired:!0,size:"sm",variant:"underlined",color:"default",...r("country_id"),children:l.map(a=>e.jsx(j,{variant:"flat",className:"uppercase",children:a.name},a._id))})}function Z({register:r}){const[l,i]=d.useState([]);return d.useEffect(()=>{(async()=>{const o=localStorage.getItem("apdcc_token");try{const n=await fetch("https://apdcc-back-production.up.railway.app/api/categories",{method:"GET",credentials:"include",headers:{token:o}});if(n.ok){const u=await n.json();i(u.response)}}catch(n){throw new Error(n)}})()},[]),e.jsx(N,{className:"max-w-xs",label:"Categoria",size:"sm",isRequired:!0,variant:"underlined",color:"default",...r("category_id"),children:l.map(a=>e.jsx(j,{variant:"flat",className:"uppercase",children:a.name},a._id))})}function K({onClose:r}){const{setRefresh:l,adminRole:i}=b(),[a,o]=d.useState(""),{register:n,handleSubmit:u,reset:x}=H({defaultValues:{name:"",sport:"",genre:"",country_id:"",category_id:""}}),c=async m=>{T.promise(async()=>{const t=localStorage.getItem("apdcc_token");try{if((await fetch("https://apdcc-back-production.up.railway.app/api/teams/create",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json",token:t},body:JSON.stringify(m)})).ok)return x(),l(),"¡Creación Exitosa! 😄";throw new Error("Oops, algo salió mal en el creación. 😕")}catch(s){throw new Error(s)}finally{r()}},{loading:"Loading...",success:t=>t,error:t=>t.message})};return e.jsxs("form",{onSubmit:u(c),children:[e.jsx(E,{label:"Nombre",id:"name",isRequired:!0,type:"text",size:"sm",variant:"underlined",color:"default",className:`${i!=="ADMIN"&&"hidden"}`,errorMessage:"",...n("name")}),e.jsxs("div",{className:"flex items-end gap-4",children:[i==="ADMIN"?e.jsx(X,{register:n}):e.jsx(E,{id:"name",label:"Nombre",placeholder:"Super Campeones FC",isRequired:!0,type:"text",size:"sm",variant:"underlined",color:"default",errorMessage:"",...n("name")}),e.jsxs(N,{className:"max-w-xs",label:"Deporte",isRequired:!0,size:"sm",variant:"underlined",color:"default",...n("sport"),children:[e.jsx(j,{textValue:"futbol7",variant:"flat",className:"uppercase",onClick:()=>o("F7"),children:"Futbol 7"},"F7"),e.jsx(j,{textValue:"futbol11",variant:"flat",className:"uppercase",onClick:()=>o("F11"),children:"Futbol 11"},"F11"),e.jsx(j,{textValue:"hockey",variant:"flat",className:"uppercase",onClick:()=>o("HOCKEY"),children:"Hockey"},"HOCKEY")]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(Z,{register:n}),e.jsxs(N,{className:"max-w-xs",label:"Genero",size:"sm",isRequired:!0,variant:"underlined",color:"default",...n("genre"),children:[a==="F7"||a==="HOCKEY"?e.jsx(j,{variant:"flat",className:"uppercase",children:"Femenino"},"FEMENINO"):null,a==="HOCKEY"?null:e.jsx(j,{variant:"flat",className:"uppercase",children:"Masculino"},"MASCULINO")]})]}),e.jsx(f,{type:"submit",className:"order-last w-full mt-5 uppercase font-semibold bg-primary/60 hover:bg-primary",variant:"solid",radius:"sm",children:"Registrar"})]})}function ee(){const{isOpen:r,onOpen:l,onOpenChange:i}=w();return e.jsxs(e.Fragment,{children:[e.jsx(f,{onPress:l,size:"lg",variant:"faded",color:"default",className:"mb-3",radius:"sm",children:"Nuevo Equipo"}),e.jsx(_,{isOpen:r,onOpenChange:i,size:"lg",backdrop:"blur",className:"border dark text-foreground border-default-400",children:e.jsx(k,{children:a=>e.jsxs(e.Fragment,{children:[e.jsxs(v,{className:"flex items-start gap-1",children:[e.jsx(U,{size:22}),"Registrar nuevo equipo"]}),e.jsx(C,{className:"pb-10",children:e.jsx(K,{onClose:a})})]})})})]})}function se({id:r,name:l,sport:i}){const{setRefresh:a}=b(),{isOpen:o,onOpen:n,onOpenChange:u}=w(),x=async()=>{T.promise(async()=>{const c=localStorage.getItem("apdcc_token");try{if((await fetch(`https://apdcc-back-production.up.railway.app/api/teams/${r}`,{method:"DELETE",credentials:"include",headers:{token:c}})).ok)return a(),"¡Equipo eliminado/a con éxito! 😄";throw new Error("Oops, algo salió mal 😕")}catch(m){throw new Error("Error al procesar la solicitud: "+m.message)}},{loading:"Loading...",success:c=>c,error:c=>c.message})};return e.jsxs(e.Fragment,{children:[e.jsx(f,{isIconOnly:!0,onPress:n,color:"danger",size:"sm",className:"transition-all bg-danger/40 hover:bg-danger duration-350",children:e.jsx(G,{size:18})}),e.jsx(_,{size:"xl",isOpen:o,onOpenChange:u,className:"border dark text-foreground border-default-400",children:e.jsx(k,{children:c=>e.jsxs(e.Fragment,{children:[e.jsx(v,{className:"flex flex-col gap-1 uppercase",children:"⚠️ Advertencia"}),e.jsx(C,{children:e.jsxs("div",{children:["Está a punto de eliminar al equipo de ",e.jsx("b",{children:i})," ",e.jsx(R,{radius:"sm",className:"capitalize",children:l}),e.jsx("br",{}),"Esta acción es permanente y no se puede deshacer.",e.jsx("br",{})," ¿Está seguro de que desea continuar?"]})}),e.jsx(D,{children:e.jsx(f,{className:"font-semibold uppercase rounded-md bg-danger/50 hover:bg-danger",onPress:()=>{x(),c()},children:"Eliminar"})})]})})})]})}function ae({id:r,role:l,name:i,state:a}){const{isOpen:o,onOpen:n,onOpenChange:u}=w();return e.jsxs(e.Fragment,{children:[e.jsx(f,{isIconOnly:!0,onPress:n,color:"default",size:"sm",className:`${a==="READY"?"opacity-0 cursor-default pointer-events-none":"opacity-100"} bg-default/50 text-default-400 hover:text-white`,children:e.jsx(V,{size:18})}),e.jsx(_,{isOpen:o,onOpenChange:u,className:"border dark text-foreground border-default-400",children:e.jsx(k,{children:x=>e.jsxs(e.Fragment,{children:[e.jsx(v,{className:"flex flex-col gap-1 uppercase",children:"⚠️ Advertencia"}),e.jsxs(C,{children:[e.jsx("p",{children:"Esta acción es permanente y no se puede deshacer."}),e.jsx(E,{placeholder:"Nuevo nombre",label:"Nombre",isRequired:!0,variant:"underlined"})]}),e.jsx(D,{children:e.jsx(f,{variant:"solid",radius:"sm",className:"font-semibold uppercase bg-primary/60 hover:bg-primary",onPress:()=>{x()},children:"editar"})})]})})})]})}const te=[{label:"nombre",key:"name"},{label:"edad",key:"age"},{label:"acciones",key:"actions"}],re=function({players:l,team:i,category:a,teamId:o,setLoading:n}){const{setRefresh:u}=b(),[x,c]=d.useState(!1),m=async(t,s)=>{c(!0),n(!0);const h=localStorage.getItem("apdcc_token");T.promise(async()=>{try{const p=await fetch(`https://apdcc-back-production.up.railway.app/api/players/playerteam/${t}`,{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json",token:h},body:JSON.stringify({action:s,team:o,id:t})});return p.ok?(await p.json(),"Jugador asignado exitosamente 😀"):`${(await p.json()).message}`}catch(p){console.error(p)}finally{u(),c(!1)}},{loading:"Loading...",success:p=>p,error:()=>"Algo salio mal"})};return e.jsxs("section",{className:"relative w-full h-full max-h-full",children:[e.jsxs("div",{className:"flex flex-row items-start justify-between px-3 lg:flex-col",children:[e.jsx("p",{className:"text-lg font-semibold lg:pb-2 lg:text-2xl",children:i?"Asignados":"Disponibles"}),e.jsxs("p",{className:"lg:mb-2 text-default-400 text-small",children:["Total ",l.length," jugadores"]})]}),e.jsx("div",{className:"absolute top-0 left-0 w-full h-full max-h-full pt-10 pb-5 lg:pt-20",children:e.jsxs(P,{"aria-label":"Users Table",className:"max-h-full",children:[e.jsx(O,{columns:te,children:t=>e.jsx(z,{className:"uppercase",children:t.label},t.key)}),e.jsx(q,{emptyContent:"No se encontraron jugadores en el equipo.",items:l,children:t=>e.jsx(M,{children:s=>e.jsx(I,{className:"capitalize ",children:s==="name"?e.jsxs("p",{children:[`${t.first_name} ${t.last_name}`," "]}):s==="age"?e.jsx(R,{color:"warning",variant:a!=="+30"?Number(t.age)>=Number(Number(a.split("-")[0]))&&Number(t.age)<=Number(Number(a.split("-")[1]))?"":"flat":Number(t.age)>=Number(a)?"":"flat",className:"lowercase",children:t.age}):s==="actions"?e.jsx("div",{className:"flex items-center gap-3",children:i?e.jsx(f,{onClick:()=>m(t._id,"remove"),color:"danger",size:"sm",variant:"solid",endContent:e.jsxs("div",{className:"flex items-center gap-1 text-sm font-semibold",children:[e.jsx(B,{size:18}),"Quitar"]})}):e.jsx(f,{onClick:()=>m(t._id,"add"),color:"success",size:"sm",variant:"solid",endContent:e.jsxs("div",{className:"flex items-center gap-1 text-sm font-semibold",children:[e.jsx(W,{size:18}),"Agregar"]})})}):A(t,s)})},t._id)})]})})]})},F=re,le=({team:r})=>{const{isOpen:l,onOpen:i,onOpenChange:a}=w(),[o,n]=d.useState([]),[u,x]=d.useState([]),[c,m]=d.useState([]),[t,s]=d.useState(!1),h=localStorage.getItem("apdcc_token"),{refresh:p}=b();return d.useEffect(()=>{(async()=>{try{const y=await fetch(`https://apdcc-back-production.up.railway.app/api/players/all/?category=${r.category_id.name}&state=READY&genre=${r.genre}`,{method:"GET",credentials:"include",headers:{"Content-Type":"application/json",token:h}});if(y.ok){const L=await y.json();n(L.response)}else throw new Error("Something went wrong")}catch(y){throw console.error(y),new Error("Something went wrong")}})()},[p]),d.useEffect(()=>{x(o.filter(g=>g.team.includes(r._id))),m(o.filter(g=>!g.team.includes(r._id))),s(!1)},[o]),e.jsxs(e.Fragment,{children:[e.jsx(f,{onPress:i,variant:"light",endContent:e.jsx(Q,{size:16}),children:r.name}),e.jsx(_,{isOpen:l,onOpenChange:a,size:"full",backdrop:"blur",className:"border dark text-foreground border-default-400",children:e.jsx(k,{children:g=>e.jsxs(e.Fragment,{children:[e.jsxs(v,{className:"flex flex-col w-full px-3 mb-0 text-center lg:mb-1",children:[e.jsx("h1",{className:"text-xl font-bold uppercase lg:text-3xl",children:r.name}),e.jsx("span",{className:"font-semibold text-default-400",children:`${r.sport} ${r.genre} ${r.category_id.name}`})]}),e.jsx(C,{className:"flex flex-row items-start justify-between gap-6",children:o?e.jsxs(e.Fragment,{children:[t?e.jsxs("section",{className:"relative w-full h-full max-h-full",children:[e.jsx("p",{className:"px-3 pb-2 text-xl font-semibold lg:text-2xl",children:"Asignados"}),e.jsx("div",{className:"flex items-center justify-between px-3",children:e.jsxs("p",{className:"mb-2 text-default-400 text-small",children:["Total ",u.length," jugadores"]})}),e.jsx("div",{className:"flex justify-center mt-10",children:e.jsx(S,{})})]}):e.jsx(F,{players:u,team:!0,teamId:r._id,category:r.category_id.name,setLoading:s}),t?e.jsxs("section",{className:"relative w-full h-full max-h-full",children:[e.jsx("p",{className:"px-3 pb-2 text-2xl font-semibold",children:"Disponibles"}),e.jsx("div",{className:"flex items-center justify-between px-3",children:e.jsxs("p",{className:"mb-2 text-default-400 text-small",children:["Total ",c.length," jugadores"]})}),e.jsx("div",{className:"flex justify-center mt-10",children:e.jsx(S,{})})]}):e.jsx(F,{players:c,team:!1,teamId:r._id,category:r.category_id.name,setLoading:s})]}):null})]})})})]})},ne=[{label:"nombre",key:"name"},{label:"deporte",key:"sport"},{label:"genero",key:"genre"},{label:"country",key:"country_id"},{label:"categoria",key:"category_id"},{label:"acciones",key:"actions"}],oe=function(){const[l,i]=d.useState({docs:[],totalDocs:0,limit:10,totalPages:0,page:0,pagingCounter:0,hasPrevPage:!1,hasNextPage:!1,prevPage:null,nextPage:null}),[a,o]=d.useState({country_id:"",genre:"",sport:"",category_id:""}),{refresh:n,isHiddenTopBar:u}=b(),[x,c]=d.useState(!0),[m,t]=d.useState(1);return d.useEffect(()=>{(async()=>{const h=localStorage.getItem("apdcc_token");try{const p=await fetch(`https://apdcc-back-production.up.railway.app/api/teams/?page=${m}`,{method:"GET",credentials:"include",headers:{token:h,queries:JSON.stringify(a)}});if(p.ok){const{response:g}=await p.json();i(g)}}catch(p){throw new Error(p)}finally{c(!1)}})()},[n,a,m]),e.jsxs("section",{className:` ${u?"pt-12":"pt-36"} absolute top-0 left-0 w-full pl-5 lg:pl-[200px] pb-16 lg:pt-20 pr-5 overflow-y-scroll h-screen bg-black`,children:[e.jsxs("div",{className:"flex flex-wrap items-start justify-between w-full gap-4 pb-4 ",children:[e.jsx(ee,{}),e.jsx(Y,{setQueries:o,queries:a,countriesFilter:!0,genresFilter:!0,sportsFilter:!0,categoriesFilter:!0})]}),e.jsxs("div",{className:"flex items-center justify-between px-3",children:[e.jsxs("p",{className:"mb-2 text-default-400 text-small",children:["Total ",l.totalDocs," equipos"]}),e.jsxs("p",{className:"mb-2 text-default-400 text-small",children:["Página ",l.page]})]}),e.jsxs(P,{"aria-label":"Users Table",bottomContent:l.page>0?e.jsx("div",{className:`${l.docs?"opacity-100":"opacity-0"} flex items-center justify-center w-full gap-4`,children:e.jsx(J,{isCompact:!0,showControls:!0,showShadow:!0,color:"primary",page:l.page,total:l.totalPages,onChange:s=>t(s)})}):null,children:[e.jsx(O,{columns:ne,children:s=>e.jsx(z,{className:"uppercase",children:s.label},s.key)}),e.jsx(q,{emptyContent:x?" ":l.docs.length===0?"No se encontraron equipos":"",items:l==null?void 0:l.docs,isLoading:x,loadingContent:e.jsx(S,{className:"mt-12",label:"Loading..."}),children:s=>e.jsx(M,{children:h=>e.jsx(I,{className:"capitalize",children:h==="country_id"?e.jsx("p",{children:s.country_id.name}):h==="name"?e.jsx(le,{team:s}):h==="category_id"?e.jsx("p",{children:s.category_id.name}):h==="actions"?e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ae,{id:s._id,role:s.role,name:`${s.first_name} ${s.last_name}`}),e.jsx(se,{id:s._id,name:s.name,sport:s.sport})]}):A(s,h)})},s._id)})]})]})},be=oe;export{be as default};
