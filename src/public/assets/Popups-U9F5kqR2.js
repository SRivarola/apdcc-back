import{r as o,h,j as a,b as x,A as b,t as j}from"./index-zsI5OImO.js";import{I as w}from"./image-GjpyWiuP.js";import{c as y}from"./chunk-AMSULWPV-aaCFLJbH.js";import"./import-9JVOK46k.js";const P=function(){const[r,p]=o.useState(""),[l,n]=o.useState(!1),[c,u]=o.useState(null),[v,m]=o.useState(null),{isHiddenTopBar:d}=h(),g=s=>{const t=s.target.files[0],e=new FileReader;e.onload=i=>{p(i.target.result)},e.readAsDataURL(t)},f=async s=>{s.preventDefault();const t=new FormData;t.set("active",l),t.set("image",r),b.promise(async()=>{try{const e=await fetch("http://localhost:8080/api/popups",{method:"PUT",credentials:"include",body:t,headers:{token:j}});return e.ok?"Popup actualizado con √©xito! üòÄ":`${(await e.json()).message}`}catch(e){return console.error(e),"Algo sali√≥ mal ü§î"}},{loading:"Loading...",success:e=>e,error:e=>e.message})};return o.useEffect(()=>{async function s(){try{const t=await fetch("http://localhost:8080/api/popups"),{response:e}=await t.json();m(e),e.active&&(n(!0),u(e.image.url))}catch(t){throw new Error(t)}}s()},[]),a.jsx("section",{className:`${d?"pt-12":"pt-36"} absolute top-0 left-0 w-full h-screen pl-5 lg:pl-[200px] pb-16 lg:pt-20 pr-5 overflow-y-scroll  bg-black`,children:a.jsxs("form",{onSubmit:f,className:"flex flex-col space-y-5",children:[a.jsx("label",{htmlFor:"imagen",className:"text-lg",children:"Selecciona una imagen:"}),a.jsx("input",{type:"file",id:"imagen",name:"imagen",accept:"image/*",onChange:g}),!r&&c&&a.jsx("img",{src:c,alt:"Previsualizaci√≥n de la imagen",className:"w-40 h-auto rounded-md"}),r&&a.jsx("img",{src:r,alt:"Previsualizaci√≥n de la imagen",className:"w-40 h-auto rounded-md"}),a.jsx(y,{isSelected:l,onValueChange:n,children:"Activar Popups"}),a.jsx(x,{type:"submit",className:"z-0 order-last font-semibold uppercase bg-primary/60 hover:bg-primary w-fit",variant:"solid",radius:"sm",startContent:a.jsx(w,{size:20}),children:"Actualizar"})]})})},$=P;export{$ as default};
