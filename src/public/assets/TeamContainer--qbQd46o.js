import{f as v,h as w,r,j as e,b as y,A as k,t as T,p as C,s as N,q as $,v as P}from"./index-6G23bIrP.js";import{S}from"./search-PTFxTutQ.js";import{i as A}from"./chunk-TC4QW7OA-WJgzoQXz.js";import{t as E,a as z,b as F,c as L,d as U,e as M}from"./chunk-YRZGWF2W-9KFzOznE.js";import{c as q}from"./chunk-OFH6WYRQ-cH_1t-U7.js";import{g as I}from"./chunk-KARN4QIT-ACaiWeLP.js";import"./import-dbGIMQMg.js";import"./import-eBYVFrAP.js";import"./chunk-M3MASYO7-JjsHZkNT.js";import"./chunk-AMSULWPV-RQof_bBs.js";import"./chunk-7F3ZLNJ6-cJopWzur.js";/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B=v("UserMinus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D=v("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]),H=[{label:"nombre",key:"name"},{label:"edad",key:"age"},{label:"acciones",key:"actions"}],J=function({players:i,team:f,category:t,teamId:h,setLoading:c,loading:g}){const{setRefresh:x}=w(),[b,d]=r.useState(!0),[u,o]=r.useState([]),n=async(s,a)=>{c(!0),k.promise(async()=>{try{const l=await fetch(`https://apdcc.com.ar/api/players/playerteam/${s}`,{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json",token:T},body:JSON.stringify({action:a,team:h,id:s})});return l.ok?(await l.json(),a==="add"?"Jugador asignado exitosamente ðŸ˜€":"Jugador removido exitosamente ðŸ˜€"):`${(await l.json()).message}`}catch(l){console.error(l)}finally{d(!1),x()}},{loading:"Loading...",success:l=>l,error:()=>"Algo salio mal"})};r.useEffect(()=>{d(!1)},[]);const m=s=>{const a=s.target.value.toLowerCase(),l=i.filter(j=>j.first_name.toLowerCase().includes(a)||j.last_name.toLowerCase().includes(a));o(l)};return e.jsxs("section",{className:"relative w-full h-full max-h-full space-y-5",children:[e.jsxs("div",{className:"flex items-start justify-between px-3 mt-5",children:[e.jsxs("div",{className:"flex flex-row lg:flex-col ",children:[e.jsx("p",{className:"text-lg font-semibold lg:pb-2 lg:text-2xl",children:f?"Asignados":"Disponibles"}),e.jsxs("p",{className:"lg:mb-2 text-default-400 text-small",children:["Total ",i.length," jugadores"]})]}),e.jsx("div",{className:"z-50 flex ms-auto w-fit",children:e.jsx(A,{size:"sm",variant:"underlined",color:"warning",endContent:e.jsx(S,{}),placeholder:"Buscar por apellido/nombre",onChange:m})})]}),e.jsx("div",{className:"absolute top-0 left-0 w-full h-full max-h-full pt-10 pb-5 lg:pt-20",children:e.jsxs(E,{"aria-label":"Users Table",className:"max-h-full",children:[e.jsx(z,{columns:H,children:s=>e.jsx(F,{className:"uppercase",children:s.label},s.key)}),e.jsx(L,{emptyContent:g?" ":i.length===0?"No se encontraron jugadores en el equipo.":"",items:u.length?u:i,children:s=>e.jsx(U,{children:a=>e.jsx(M,{className:"capitalize ",children:a==="name"?e.jsxs("p",{children:[`${s.last_name} ${s.first_name}`," "]}):a==="age"?e.jsx(q,{color:"warning",variant:t!=="+30"?Number(s.age)>=Number(Number(t.split("-")[0]))&&Number(s.age)<=Number(Number(t.split("-")[1]))?"":"flat":Number(s.age)>=Number(t)?"":"flat",className:"lowercase",children:s.age}):a==="actions"?e.jsx("div",{className:"flex items-center gap-3",children:f?e.jsx(y,{onClick:()=>n(s._id,"remove"),color:"danger",size:"sm",variant:"solid",endContent:e.jsxs("div",{className:"flex items-center gap-1 text-sm font-semibold",children:[e.jsx(B,{size:18}),"Quitar"]})}):e.jsx(y,{onClick:()=>n(s._id,"add"),color:"success",size:"sm",variant:"solid",endContent:e.jsxs("div",{className:"flex items-center gap-1 text-sm font-semibold",children:[e.jsx(D,{size:18}),"Agregar"]})})}):I(s,a)})},s._id)})]})})]})},_=J,se=()=>{const{id:p}=C(),{refresh:i,isHiddenTopBar:f}=w(),[t,h]=r.useState(null),[c,g]=r.useState([]),[x,b]=r.useState([]),[d,u]=r.useState([]),[o,n]=r.useState(!1);return r.useEffect(()=>{(async()=>{const s=await $(p);if(s.ok){const{response:a}=await s.json();h(a)}})()},[p]),r.useEffect(()=>{n(!0),t&&(async()=>{const s=await P(`?category=${t.category_id.name}&state=READY&genre=${t.genre}&country_id=${t.country_id._id}`);if(s.ok){const a=await s.json();g(a.response)}else throw new Error("Something went wrong")})()},[t,i]),r.useEffect(()=>{const m=c.filter(a=>a.team.includes(t._id)),s=c.filter(a=>!a.team.includes(t._id));b(m.sort((a,l)=>a.last_name.localeCompare(l.last_name))),u(s.sort((a,l)=>a.last_name.localeCompare(l.last_name))),n(!1)},[c]),e.jsx("section",{className:` ${f?"pt-12":"pt-36"} absolute top-0 left-0 w-full pl-5 lg:pl-[200px] pb-5 lg:pt-20 pr-5 overflow-y-scroll h-screen bg-black`,children:t?e.jsxs("div",{className:"relative flex flex-col w-full h-full",children:[e.jsxs("div",{className:"flex flex-col w-full px-3 mb-0 text-center lg:mb-1",children:[e.jsx("h1",{className:"text-xl font-bold uppercase lg:text-3xl",children:t.name}),e.jsx("span",{className:"font-semibold text-default-400",children:`${t.sport} ${t.genre} ${t.category_id.name}`})]}),e.jsx("div",{className:"flex flex-row items-stretch justify-between h-full gap-6",children:c?e.jsxs(e.Fragment,{children:[o?e.jsxs("section",{className:"relative w-full h-full max-h-full",children:[e.jsx("p",{className:"px-3 pb-2 text-xl font-semibold lg:text-2xl",children:"Asignados"}),e.jsx("div",{className:"flex items-center justify-between px-3",children:e.jsxs("p",{className:"mb-2 text-default-400 text-small",children:["Total ",x.length," jugadores"]})}),e.jsx("div",{className:"flex justify-center mt-10",children:e.jsx(N,{})})]}):e.jsx(_,{players:x,team:!0,teamId:t._id,category:t.category_id.name,loading:o,setLoading:n}),o?e.jsxs("section",{className:"relative w-full h-full max-h-full",children:[e.jsx("p",{className:"px-3 pb-2 text-2xl font-semibold",children:"Disponibles"}),e.jsx("div",{className:"flex items-center justify-between px-3",children:e.jsxs("p",{className:"mb-2 text-default-400 text-small",children:["Total ",d.length," jugadores"]})}),e.jsx("div",{className:"flex justify-center mt-10",children:e.jsx(N,{})})]}):e.jsx(_,{players:d,team:!1,teamId:t._id,category:t.category_id.name,loading:o,setLoading:n})]}):null})]}):null})};export{se as default};
