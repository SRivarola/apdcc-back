import{r as c,j as e,l as F,o as S,f as b,b as h,A as C,u as y,m as N,a as _,S as O,s as P,L as q,p as z}from"./index-WqbPWE0E.js";import{F as T}from"./Filters-dfVvMkwQ.js";import{u as R}from"./index.esm-AaNy5cSr.js";import{s as g,l as x}from"./chunk-ZFWMN6TD-2mDsgrVL.js";import{i as j}from"./chunk-TC4QW7OA-v-iVWaFn.js";import{m as v}from"./chunk-3S23ARPO-eiL4WC3X.js";import{m as w}from"./chunk-EPDLEVDR-54dcRee3.js";import{T as M}from"./trash-2-6I61b9He.js";import{c as $}from"./chunk-OFH6WYRQ-oWe43lFJ.js";import{m as k}from"./chunk-QY5NICTW-_zE6iGR2.js";import{P as D}from"./pen-square-aFwKzsj7.js";import{t as A,a as I,b as L,c as H,d as V,e as Y}from"./chunk-YRZGWF2W-hcMjxO4J.js";import{p as U}from"./chunk-BIN3WWJN-MMgnA3-P.js";import{g as B}from"./chunk-KARN4QIT-0lg9pr17.js";import"./search-sQfN_xwV.js";import"./chunk-AMSULWPV-a7khhzyU.js";import"./import-hIBVkbdo.js";import"./import-yG13OaeA.js";import"./chunk-7F3ZLNJ6-12qWG1A4.js";import"./chunk-M3MASYO7-kWQ4oELG.js";function G({register:l}){const[a,o]=c.useState([]);return c.useEffect(()=>{(async()=>{const n=await F();if(n.ok){const t=await n.json();o(t.response)}})()},[]),e.jsx(g,{className:"max-w-xs",label:"Country",isRequired:!0,size:"sm",variant:"underlined",color:"default",...l("country_id"),children:a.map(r=>e.jsx(x,{variant:"flat",className:"uppercase",children:r.name},r._id))})}function J({register:l}){const[a,o]=c.useState([]);return c.useEffect(()=>{(async()=>{const n=await S();if(n.ok){const t=await n.json();o(t.response)}})()},[]),e.jsx(g,{className:"max-w-xs",label:"Categoria",size:"sm",isRequired:!0,variant:"underlined",color:"default",...l("category_id"),children:a.map(r=>e.jsx(x,{variant:"flat",className:"uppercase",children:r.name},r._id))})}function K({onClose:l}){const{setRefresh:a,adminRole:o}=b(),[r,n]=c.useState(""),{register:t,handleSubmit:p,reset:d}=R({defaultValues:{name:"",sport:"",genre:"",country_id:"",category_id:""}}),i=async m=>{C.promise(async()=>{const f=localStorage.getItem("apdcc_token");try{if((await fetch("https://apdcc-back-production.up.railway.app/api/teams/create",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json",token:f},body:JSON.stringify(m)})).ok)return d(),a(),"¡Creación Exitosa! 😄";throw new Error("Oops, algo salió mal en el creación. 😕")}catch(s){throw new Error(s)}finally{l()}},{loading:"Loading...",success:f=>f,error:f=>f.message})};return e.jsxs("form",{onSubmit:p(i),children:[e.jsx(j,{label:"Nombre",id:"name",isRequired:!0,type:"text",size:"sm",variant:"underlined",color:"default",className:`${o!=="ADMIN"&&"hidden"}`,errorMessage:"",...t("name")}),e.jsxs("div",{className:"flex items-end gap-4",children:[o==="ADMIN"?e.jsx(G,{register:t}):e.jsx(j,{id:"name",label:"Nombre",placeholder:"Super Campeones FC",isRequired:!0,type:"text",size:"sm",variant:"underlined",color:"default",errorMessage:"",...t("name")}),e.jsxs(g,{className:"max-w-xs",label:"Deporte",isRequired:!0,size:"sm",variant:"underlined",color:"default",...t("sport"),children:[e.jsx(x,{textValue:"futbol7",variant:"flat",className:"uppercase",onClick:()=>n("F7"),children:"Futbol 7"},"F7"),e.jsx(x,{textValue:"futbol11",variant:"flat",className:"uppercase",onClick:()=>n("F11"),children:"Futbol 11"},"F11"),e.jsx(x,{textValue:"hockey",variant:"flat",className:"uppercase",onClick:()=>n("HOCKEY"),children:"Hockey"},"HOCKEY")]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(J,{register:t}),e.jsxs(g,{className:"max-w-xs",label:"Genero",size:"sm",isRequired:!0,variant:"underlined",color:"default",...t("genre"),children:[r==="F7"||r==="HOCKEY"?e.jsx(x,{variant:"flat",className:"uppercase",children:"Femenino"},"FEMENINO"):null,r==="HOCKEY"?null:e.jsx(x,{variant:"flat",className:"uppercase",children:"Masculino"},"MASCULINO")]})]}),e.jsx(h,{type:"submit",className:"order-last w-full mt-5 uppercase font-semibold bg-primary/60 hover:bg-primary",variant:"solid",radius:"sm",children:"Registrar"})]})}function Q(){const{isOpen:l,onOpen:a,onOpenChange:o}=y();return e.jsxs(e.Fragment,{children:[e.jsx(h,{onPress:a,size:"lg",variant:"faded",color:"default",className:"mb-3",radius:"sm",children:"Nuevo Equipo"}),e.jsx(N,{isOpen:l,onOpenChange:o,size:"lg",backdrop:"blur",className:"border dark text-foreground border-default-400",children:e.jsx(_,{children:r=>e.jsxs(e.Fragment,{children:[e.jsxs(v,{className:"flex items-start gap-1",children:[e.jsx(O,{size:22}),"Registrar nuevo equipo"]}),e.jsx(w,{className:"pb-10",children:e.jsx(K,{onClose:r})})]})})})]})}function W({id:l,name:a,sport:o}){const{setRefresh:r}=b(),{isOpen:n,onOpen:t,onOpenChange:p}=y(),d=async()=>{C.promise(async()=>{const i=localStorage.getItem("apdcc_token");try{if((await fetch(`https://apdcc-back-production.up.railway.app/api/teams/${l}`,{method:"DELETE",credentials:"include",headers:{token:i}})).ok)return r(),"¡Equipo eliminado/a con éxito! 😄";throw new Error("Oops, algo salió mal 😕")}catch(m){throw new Error("Error al procesar la solicitud: "+m.message)}},{loading:"Loading...",success:i=>i,error:i=>i.message})};return e.jsxs(e.Fragment,{children:[e.jsx(h,{isIconOnly:!0,onPress:t,color:"danger",size:"sm",className:"transition-all bg-danger/40 hover:bg-danger duration-350",children:e.jsx(M,{size:18})}),e.jsx(N,{size:"xl",isOpen:n,onOpenChange:p,className:"border dark text-foreground border-default-400",children:e.jsx(_,{children:i=>e.jsxs(e.Fragment,{children:[e.jsx(v,{className:"flex flex-col gap-1 uppercase",children:"⚠️ Advertencia"}),e.jsx(w,{children:e.jsxs("div",{children:["Está a punto de eliminar al equipo de ",e.jsx("b",{children:o})," ",e.jsx($,{radius:"sm",className:"capitalize",children:a}),e.jsx("br",{}),"Esta acción es permanente y no se puede deshacer.",e.jsx("br",{})," ¿Está seguro de que desea continuar?"]})}),e.jsx(k,{children:e.jsx(h,{className:"font-semibold uppercase rounded-md bg-danger/50 hover:bg-danger",onPress:()=>{d(),i()},children:"Eliminar"})})]})})})]})}function X({id:l,role:a,name:o,state:r}){const{isOpen:n,onOpen:t,onOpenChange:p}=y();return e.jsxs(e.Fragment,{children:[e.jsx(h,{isIconOnly:!0,onPress:t,color:"default",size:"sm",className:`${r==="READY"?"opacity-0 cursor-default pointer-events-none":"opacity-100"} bg-default/50 text-default-400 hover:text-white`,children:e.jsx(D,{size:18})}),e.jsx(N,{isOpen:n,onOpenChange:p,className:"border dark text-foreground border-default-400",children:e.jsx(_,{children:d=>e.jsxs(e.Fragment,{children:[e.jsx(v,{className:"flex flex-col gap-1 uppercase",children:"⚠️ Advertencia"}),e.jsxs(w,{children:[e.jsx("p",{children:"Esta acción es permanente y no se puede deshacer."}),e.jsx(j,{placeholder:"Nuevo nombre",label:"Nombre",isRequired:!0,variant:"underlined"})]}),e.jsx(k,{children:e.jsx(h,{variant:"solid",radius:"sm",className:"font-semibold uppercase bg-primary/60 hover:bg-primary",onPress:()=>{d()},children:"editar"})})]})})})]})}const Z=[{label:"nombre",key:"name"},{label:"deporte",key:"sport"},{label:"genero",key:"genre"},{label:"country",key:"country_id"},{label:"categoria",key:"category_id"},{label:"acciones",key:"actions"}],ee=function(){const[a,o]=c.useState({docs:[],totalDocs:0,limit:10,totalPages:0,page:0,pagingCounter:0,hasPrevPage:!1,hasNextPage:!1,prevPage:null,nextPage:null}),[r,n]=c.useState({country_id:"",genre:"",sport:"",category_id:""}),{refresh:t,isHiddenTopBar:p}=b(),[d,i]=c.useState(!0),[m,f]=c.useState(1);return c.useEffect(()=>{(async()=>{const u=await z(m,r);if(u.ok){const{response:E}=await u.json();o(E)}i(!1)})()},[t,r,m]),e.jsxs("section",{className:` ${p?"pt-12":"pt-36"} absolute top-0 left-0 w-full pl-5 lg:pl-[200px] pb-16 lg:pt-20 pr-5 overflow-y-scroll h-screen bg-black`,children:[e.jsxs("div",{className:"flex flex-wrap items-start justify-between w-full gap-4 pb-4 ",children:[e.jsx(Q,{}),e.jsx(T,{setQueries:n,queries:r,countriesFilter:!0,genresFilter:!0,sportsFilter:!0,categoriesFilter:!0})]}),e.jsxs("div",{className:"flex items-center justify-between px-3",children:[e.jsxs("p",{className:"mb-2 text-default-400 text-small",children:["Total ",a.totalDocs," equipos"]}),e.jsxs("p",{className:"mb-2 text-default-400 text-small",children:["Página ",a.page]})]}),e.jsxs(A,{"aria-label":"Users Table",bottomContent:a.page>0?e.jsx("div",{className:`${a.docs?"opacity-100":"opacity-0"} flex items-center justify-center w-full gap-4`,children:e.jsx(U,{isCompact:!0,showControls:!0,showShadow:!0,color:"primary",page:a.page,total:a.totalPages,onChange:s=>f(s)})}):null,children:[e.jsx(I,{columns:Z,children:s=>e.jsx(L,{className:"uppercase",children:s.label},s.key)}),e.jsx(H,{emptyContent:d?" ":a.docs.length===0?"No se encontraron equipos":"",items:a==null?void 0:a.docs,isLoading:d,loadingContent:e.jsx(P,{className:"mt-12",label:"Loading..."}),children:s=>e.jsx(V,{children:u=>e.jsx(Y,{className:"capitalize",children:u==="country_id"?e.jsx("p",{children:s.country_id.name}):u==="name"?e.jsx(q,{to:`/dashboard/teams/team/${s._id}`,children:s.name}):u==="category_id"?e.jsx("p",{children:s.category_id.name}):u==="actions"?e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(X,{id:s._id,role:s.role,name:`${s.first_name} ${s.last_name}`}),e.jsx(W,{id:s._id,name:s.name,sport:s.sport})]}):B(s,u)})},s._id)})]})]})},Ne=ee;export{Ne as default};
