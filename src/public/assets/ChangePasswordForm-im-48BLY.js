import{r as c,j as e,b as S,A as k}from"./index-WqbPWE0E.js";import{u as E}from"./index.esm-AaNy5cSr.js";import{z as t,t as L}from"./index-c-RFDuWi.js";import{E as d,a as m}from"./eye-AbV4c2mz.js";import{i as n}from"./chunk-TC4QW7OA-v-iVWaFn.js";import"./import-yG13OaeA.js";import"./import-hIBVkbdo.js";import"./chunk-M3MASYO7-kWQ4oELG.js";const I=t.object({mail:t.string().email({message:"Por favor, ingresa una direcci칩n de correo electr칩nico v치lida"}),oldPassword:t.string().min(8,{message:"La contrase침a debe tener al menos 8 caracteres"}),newPassword:t.string().min(8,{message:"La contrase침a debe tener al menos 8 caracteres"}),confirmPassword:t.string().min(8,{message:"La contrase침a debe tener al menos 8 caracteres"})}).refine(s=>s.newPassword===s.confirmPassword,{message:"Las contrase침as no coinciden",path:["confirmPassword"]}).refine(s=>s.newPassword!==s.oldPassword,{message:"La nueva contrase침a debe ser diferente a la anterior",path:["newPassword"]});function J(){var u,p,x,f;const[s,w]=c.useState(!1),[i,g]=c.useState(!1),[l,b]=c.useState(!1),h=()=>w(!s),j=()=>g(!i),P=()=>b(!l),{register:o,handleSubmit:y,formState:{errors:r}}=E({defaultValues:{mail:"",oldPassword:"",newPassword:"",confirmPassword:""},resolver:L(I)}),v=async C=>{const{oldPassword:N,newPassword:z}=C,V=localStorage.getItem("apdcc_token");k.promise(async()=>{try{const a=await fetch("https://apdcc-back-production.up.railway.app/api/auth/pass",{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json",token:V},body:JSON.stringify({password:N,newPass:z})});if(a.ok)return console.log(await a.json()),"춰Contrase침a cambiada con 칠xito! 游땏";throw new Error("Oops, algo sali칩 mal en el cambio de contrase침a. 游땟")}catch(a){throw console.log(a),a}},{loading:"Loading...",success:a=>a,error:a=>a.message})};return e.jsx("section",{className:"flex items-center justify-center h-screen",children:e.jsxs("div",{className:"flex flex-col items-center justify-center max-w-xs p-10 m-auto rounded-xl xl:max-w-lg bg-white/10",children:[e.jsx("h1",{className:"pb-5 text-xl font-medium text-center md:text-2xl",children:"Cambiar Contrase침a"}),e.jsxs("form",{onSubmit:y(v),children:[e.jsx(n,{type:"email",id:"mail",isRequired:!0,size:"lg",label:"Email",variant:"underlined",placeholder:"ejemplo@apdcc.com.ar",color:"default",errorMessage:(u=r.mail)==null?void 0:u.message,...o("mail")}),e.jsx(n,{type:s?"text":"password",id:"oldPassword",isRequired:!0,size:"lg",label:"Antigua Contrase침a",variant:"underlined",placeholder:"pepe123",color:"default",endContent:e.jsx("button",{className:"focus:outline-none",type:"button",onClick:h,children:s?e.jsx(d,{size:22,className:"text-2xl pointer-events-none text-default-400"}):e.jsx(m,{size:22,className:"text-2xl pointer-events-none text-default-400"})}),errorMessage:(p=r.oldPassword)==null?void 0:p.message,...o("oldPassword")}),e.jsx(n,{type:i?"text":"password",id:"newPassword",isRequired:!0,size:"lg",label:"Nueva Contrase침a",variant:"underlined",placeholder:"juarez123",color:"default",endContent:e.jsx("button",{className:"focus:outline-none",type:"button",onClick:j,children:i?e.jsx(d,{size:22,className:"text-2xl pointer-events-none text-default-400"}):e.jsx(m,{size:22,className:"text-2xl pointer-events-none text-default-400"})}),errorMessage:(x=r.newPassword)==null?void 0:x.message,...o("newPassword")}),e.jsx(n,{type:l?"text":"password",id:"confirmPassword",isRequired:!0,size:"lg",label:"Confirmar Contrase침a",variant:"underlined",placeholder:"juarez123",color:"default",endContent:e.jsx("button",{className:"focus:outline-none",type:"button",onClick:P,children:l?e.jsx(d,{size:22,className:"text-2xl pointer-events-none text-default-400"}):e.jsx(m,{size:22,className:"text-2xl pointer-events-none text-default-400"})}),errorMessage:(f=r.confirmPassword)==null?void 0:f.message,...o("confirmPassword")}),e.jsx(S,{type:"submit",radius:"sm",className:"w-full mt-2",variant:"solid",color:"default",children:"Cambiar"})]})]})})}export{J as default};
