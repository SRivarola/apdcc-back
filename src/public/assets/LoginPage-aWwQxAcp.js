import{J as y,u as N,r,U as v,N as E,j as e,i as u,b as S,A as k}from"./index-A5TPDa_0.js";import{z as n,t as C}from"./index-_aPCqjKx.js";import{u as L}from"./index.esm-fc70hbR5.js";import{U as z}from"./user-eZItQSv_.js";import{E as U,a as R}from"./eye-flvge6iM.js";/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A=y("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),I=n.object({mail:n.string().email({message:"Por favor, ingresa una direcciÃ³n de correo electrÃ³nico vÃ¡lida"}),password:n.string().min(8,{message:"La contraseÃ±a debe contener al menos 8 caracteres"})}),M="http://localhost:8080/api/auth/login";function T(){var d,m;const a=N(),[o,x]=r.useState(!1),{setAuthChange:p}=r.useContext(v),{setAdminRole:f,adminRole:i}=E(),g=()=>x(!o),{register:l,handleSubmit:h,formState:{errors:c}}=L({defaultValues:{mail:"",password:""},resolver:C(I)}),b=async j=>{k.promise(async()=>{try{const s=await fetch(M,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(j)});if(s.ok){const t=await s.json();return f(t.user.role),p(w=>!w),t.user.role==="JUEZ"?a("/dashboard/judges"):a("/dashboard"),"Â¡Inicio de sesiÃ³n exitoso! ðŸ˜„ Â¡Bienvenid@!"}else{const{response:t}=await s.json();return t}}catch(s){throw console.log(s),s}},{loading:"Loading...",success:s=>s,error:s=>s.message})};return r.useEffect(()=>{i&&a("/dashboard")},[i]),e.jsx("section",{className:"absolute top-0 left-0 flex items-center justify-center w-screen h-screen px-3 pb-3 bg-black",children:e.jsxs("div",{className:"max-w-xs p-10 m-auto rounded-xl xl:max-w-lg bg-white/10",children:[e.jsxs("h1",{className:"flex items-center justify-center gap-1 pb-2 text-2xl font-medium text-center md:text-4xl md:gap-2",children:[e.jsx(z,{className:"w-6 h-6 md:w-9 md:h-9"}),"Login"]}),e.jsxs("form",{className:"flex flex-col items-center justify-center gap-3 ",onSubmit:h(b),children:[e.jsx(u,{type:"email",id:"mail",isRequired:!0,size:"lg",label:"Email",variant:"underlined",placeholder:"ejemplo@ejemplo.com",className:"max-w-xs",color:"default",errorMessage:(d=c.mail)==null?void 0:d.message,endContent:e.jsx(A,{className:"text-default-400 ",size:22}),...l("mail")}),e.jsx(u,{label:"Password",id:"password",isRequired:!0,size:"lg",variant:"underlined",placeholder:"Enter your password",color:"default",errorMessage:(m=c.password)==null?void 0:m.message,endContent:e.jsx("button",{className:"focus:outline-none",type:"button",onClick:g,children:o?e.jsx(U,{size:22,className:"text-2xl pointer-events-none text-default-400"}):e.jsx(R,{size:22,className:"text-2xl pointer-events-none text-default-400"})}),type:o?"text":"password",className:"max-w-xs ",...l("password")}),e.jsx(S,{className:"w-full mt-2 font-semibold uppercase",type:"submit",variant:"solid",radius:"sm",color:"default",children:"Login"})]})]})})}export{T as default};
