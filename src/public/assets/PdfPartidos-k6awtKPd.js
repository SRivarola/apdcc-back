import{r as i,j as t,v as h,s as x,h as _}from"./index-u9Mlmx8x.js";import{N as g}from"./NavbarPdf-2ExFt4FQ.js";import{h as y}from"./moment-WSJ9un1t.js";import{I as j}from"./InputDate-LvZCba54.js";import{D as w}from"./DownloadFixturePDF-S3qnoXVe.js";import{t as b,a as P,b as v,c as D,d as N,e as C}from"./chunk-YRZGWF2W-u3SmKTJz.js";import{p as S}from"./chunk-BIN3WWJN-7KX_dyum.js";import"./chunk-TC4QW7OA-B5oeTNaY.js";import"./import-SUE7hkVm.js";import"./import-liP3PNfc.js";import"./chunk-M3MASYO7-ohbS1yBx.js";import"./react-pdf.browser-i6d1EmyO.js";import"./objectWithoutPropertiesLoose-pdUxmcoj.js";import"./_commonjs-dynamic-modules-h-SxKiO4.js";import"./LOGO-NEGRO-HORIZONTAL-msT39if3.js";import"./chunk-MPX6TMFQ-ZnCF_Yne.js";import"./chunk-MA2FG3JE-yCRnBVSG.js";import"./chunk-AMSULWPV-hCndOfP_.js";import"./chunk-7F3ZLNJ6-59j5qkQ7.js";import"./index-taukuCH3.js";const E=({match:a})=>{const[s,c]=i.useState();async function e(l){const n=await h(`?team=${l}&state=READY`);if(n.ok){const{response:p}=await n.json();return p}else throw new Error("Something went wrong")}const o=async()=>{try{const[l,n]=await Promise.all([e(a.local.team_id._id),e(a.visit.team_id._id)]),p=l.sort((r,d)=>r.last_name[0].localeCompare(d.last_name[0])),m=n.sort((r,d)=>r.last_name[0].localeCompare(d.last_name[0]));c(r=>({...r,localPlayers:p,visitPlayers:m}))}catch(l){console.error("Error fetching players",l)}};return i.useEffect(()=>{o()},[a]),t.jsx("div",{className:"flex mt-3",children:t.jsx(w,{match:a,players:s})})},k=[{label:"Torneo",key:"tournament_id"},{label:"local",key:"local"},{label:"visitante",key:"visit"},{label:"PDF",key:"pdf"}],M=({data:a,isFetching:s,setCurrentPage:c})=>t.jsxs(b,{isStriped:!0,"aria-label":"Tournament Table",className:"shadow-lg shadow-white/10 rounded-xl",bottomContent:a.page>0?t.jsx("div",{className:`${a.docs?"opacity-100":"opacity-0"} flex items-center justify-center w-full gap-4`,children:t.jsx(S,{isCompact:!0,showControls:!0,showShadow:!0,color:"primary",page:a.page,total:a.totalPages,onChange:e=>{c(e)}})}):null,children:[t.jsx(P,{columns:k,children:e=>t.jsx(v,{className:"uppercase",children:e.label},e.key)}),t.jsx(D,{emptyContent:s?" ":a.docs.length===0?"No se encontraron partidos":"",items:s?[]:a.docs.filter(e=>e.local&&e.local.team_id&&e.visit&&e.visit.team_id),isLoading:s,loadingContent:t.jsx(x,{label:"Loading..."}),children:e=>e.visit?t.jsx(N,{children:o=>t.jsx(C,{className:"capitalize text-white",children:o==="tournament_id"?t.jsx("p",{children:e.tournament_id.name||""}):o==="local"?t.jsx("p",{children:e.local.team_id.name||""}):o==="visit"?t.jsx("p",{children:e.visit.team_id.name||""}):o==="pdf"?t.jsx(E,{match:e}):null})},e._id):null})]}),X=()=>{const{isHiddenTopBar:a}=_(),[s,c]=i.useState(y(new Date).format("YYYY-MM-DD")),[e,o]=i.useState(null),[l,n]=i.useState(1),[p,m]=i.useState(!0),r=async d=>{try{m(!0);const u=await fetch(`https://apdcc.com.ar/api/matches/paginate?date=${d}&page=${l}`);if(u.ok){const{response:f}=await u.json();o(f)}}catch(u){console.log(u)}finally{m(!1)}};return i.useEffect(()=>{s&&r(s)},[s,l]),t.jsxs("section",{className:`${a?"pt-12":"pt-36"} absolute top-0 left-0 w-full pl-5 lg:pl-[200px] pb-16  lg:pt-20 pr-5 overflow-y-scroll bg-black`,children:[t.jsx(g,{}),t.jsxs("div",{className:"w-full h-full flex flex-col text-default-300 p-10 items-center gap-10",children:[t.jsx(j,{date:s,setDate:c}),e?t.jsx(M,{data:e,isFetching:p,setCurrentPage:n}):null]})]})};export{X as default};
