import{u as q}from"./chunk-TC4QW7OA-v-iVWaFn.js";import{r as s,a2 as J,j as l,H as P,Z as F}from"./index-WqbPWE0E.js";function T(){return T=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},T.apply(this,arguments)}function Q(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,a;for(a=0;a<r.length;a++)i=r[a],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}var V=s.useLayoutEffect,ee=function(e){var t=s.useRef(e);return V(function(){t.current=e}),t},M=function(e,t){if(typeof e=="function"){e(t);return}e.current=t},te=function(e,t){var r=s.useRef();return s.useCallback(function(i){e.current=i,r.current&&M(r.current,null),r.current=t,t&&M(t,i)},[t])},O={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0"},re=function(e){Object.keys(O).forEach(function(t){e.style.setProperty(t,O[t],"important")})},B=re,o=null,$=function(e,t){var r=e.scrollHeight;return t.sizingStyle.boxSizing==="border-box"?r+t.borderSize:r-t.paddingSize};function ne(n,e,t,r){t===void 0&&(t=1),r===void 0&&(r=1/0),o||(o=document.createElement("textarea"),o.setAttribute("tabindex","-1"),o.setAttribute("aria-hidden","true"),B(o)),o.parentNode===null&&document.body.appendChild(o);var i=n.paddingSize,a=n.borderSize,d=n.sizingStyle,b=d.boxSizing;Object.keys(d).forEach(function(p){var m=p;o.style[m]=d[m]}),B(o),o.value=e;var u=$(o,n);o.value=e,u=$(o,n),o.value="x";var f=o.scrollHeight-i,c=f*t;b==="border-box"&&(c=c+i+a),u=Math.max(c,u);var h=f*r;return b==="border-box"&&(h=h+i+a),u=Math.min(h,u),[u,f]}var A=function(){},ie=function(e,t){return e.reduce(function(r,i){return r[i]=t[i],r},{})},ae=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","boxSizing","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","tabSize","textIndent","textRendering","textTransform","width","wordBreak"],oe=!!document.documentElement.currentStyle,se=function(e){var t=window.getComputedStyle(e);if(t===null)return null;var r=ie(ae,t),i=r.boxSizing;if(i==="")return null;oe&&i==="border-box"&&(r.width=parseFloat(r.width)+parseFloat(r.borderRightWidth)+parseFloat(r.borderLeftWidth)+parseFloat(r.paddingRight)+parseFloat(r.paddingLeft)+"px");var a=parseFloat(r.paddingBottom)+parseFloat(r.paddingTop),d=parseFloat(r.borderBottomWidth)+parseFloat(r.borderTopWidth);return{sizingStyle:r,paddingSize:a,borderSize:d}},de=se;function N(n,e,t){var r=ee(t);s.useLayoutEffect(function(){var i=function(d){return r.current(d)};if(n)return n.addEventListener(e,i),function(){return n.removeEventListener(e,i)}},[])}var ue=function(e){N(window,"resize",e)},le=function(e){N(document.fonts,"loadingdone",e)},ce=["cacheMeasurements","maxRows","minRows","onChange","onHeightChange"],he=function(e,t){var r=e.cacheMeasurements,i=e.maxRows,a=e.minRows,d=e.onChange,b=d===void 0?A:d,u=e.onHeightChange,f=u===void 0?A:u,c=Q(e,ce),h=c.value!==void 0,p=s.useRef(null),m=te(p,t),H=s.useRef(0),y=s.useRef(),v=function(){var g=p.current,x=r&&y.current?y.current:de(g);if(x){y.current=x;var L=ne(x,g.value||g.placeholder||"x",a,i),S=L[0],j=L[1];H.current!==S&&(H.current=S,g.style.setProperty("height",S+"px","important"),f(S,{rowHeight:j}))}},C=function(g){h||v(),b(g)};return s.useLayoutEffect(v),ue(v),le(v),s.createElement("textarea",T({},c,{onChange:C,ref:m}))},fe=s.forwardRef(he),k=J(({style:n,minRows:e=3,maxRows:t=8,cacheMeasurements:r=!1,disableAutosize:i=!1,onHeightChange:a,...d},b)=>{const{Component:u,label:f,description:c,startContent:h,endContent:p,hasHelper:m,shouldLabelBeOutside:H,shouldLabelBeInside:y,errorMessage:v,getBaseProps:C,getLabelProps:R,getInputProps:g,getInnerWrapperProps:x,getInputWrapperProps:L,getHelperWrapperProps:S,getDescriptionProps:j,getErrorMessageProps:_}=q({...d,ref:b,isMultiline:!0}),[U,Y]=s.useState(e>1),[Z,D]=s.useState(!1),W=f?l.jsx("label",{...R(),children:f}):null,z=g(),G=(w,E)=>{if(e===1&&Y(w>=E.rowHeight*2),t>e){const X=w>=t*E.rowHeight;D(X)}a==null||a(w,E)},I=i?l.jsx("textarea",{...z,style:P(z.style,n??{})}):l.jsx(fe,{...z,cacheMeasurements:r,"data-hide-scroll":F(!Z),maxRows:t,minRows:e,style:P(z.style,n??{}),onHeightChange:G}),K=s.useMemo(()=>h||p?l.jsxs("div",{...x(),children:[h,I,p]}):l.jsx("div",{...x(),children:I}),[h,z,p,x]);return l.jsxs(u,{...C(),children:[H?W:null,l.jsxs("div",{...L(),"data-has-multiple-rows":F(U),children:[y?W:null,K]}),m?l.jsx("div",{...S(),children:v?l.jsx("div",{..._(),children:v}):c?l.jsx("div",{...j(),children:c}):null}):null]})});k.displayName="NextUI.Textarea";var ve=k;export{ve as t};
